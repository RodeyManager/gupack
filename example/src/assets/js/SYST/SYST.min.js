(function(t){"use strict";var e={};e.VERSION="2.0.49",e.AUTHOR="Rodey Luo";try{e.$=t.jQuery||t.Zepto||void 0}catch(n){throw new Error("$不存在，请先引入jQuery|Zepto插件，依赖其中一个"+n)}var i=function(t){var e,n=t,i={};for(e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i},r=function(t,e){if(!t)return e;if(!e)return t;var n=i(t);for(var r in e)n[r]=e[r];return n},s=function(t,n){var i,t=Array.prototype.slice.call(t),s=t[0],o=0,a={},c="__proto__"in a;if(e.V.isObject(s)){if("__instance_SYST__"in s){for(t.shift(),i=t.length;i>o;++o)a=r(a,t[o]);return c?a.__proto__=s:a=r(a,s),a}for(i=t.length;i>o;++o)a=r(a,t[o]);return c?a.__proto__=new n:a=r(a,n.prototype),a}return c?a.__proto__=new n:a=new n,a};return e.extend=r,e.extendClass=s,e.clone=i,!1 in Object&&(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}),"object"==typeof module&&"object"==typeof module.exports?module.exports=e:t.SYST=e,e}).call(this,window),function(t){"use strict";var e=Object.prototype.toString,n=function(){this.__instance_SYST__="SYST Validate",this.__Name__="Validate"};t.Validate=function(){return t.extendClass(arguments,n)},t.V=n.prototype={isEmpty:function(t){return!t||0===t.length||null==t},isCN:function(t,e){return e?/^[\u4e00-\u9fa5]+$/.test(t):/[\u4e00-\u9fa5]+/gi.test(t)},isEmail:function(t){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/gi.test(t)},isURL:function(t){return/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/i.test(t)},isTel:function(t){return/^(\(\d{3,4}\)|\d{3,4}-)?\d{7,8}$/gi.test(t)},isMobile:function(t){return/^1[3|4|5|7|8]{1}\d{9}$/.test(t)},isZip:function(t){return/^\d{6}$/.test(t)},isDateLocal:function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})$/.test(t)},isDateTime:function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},isTime:function(t){return/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},isNull:function(t){return null==t},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:function(t){return"[object Array]"===e.call(t)},isDate:function(t){return"[object Date]"===e.call(t)},isObject:function(t){return"[object Object]"===e.call(t)},isFunction:function(t){return"function"==typeof t},isFile:function(t){return"[object File]"===e.call(t)},isBlob:function(t){return"[object Blob]"===e.call(t)},isBoolean:function(t){return"boolean"==typeof t},isdefined:function(t){return"undefined"!=typeof t},isRegExp:function(t){return"[object RegExp]"===e.call(t)},isWindow:function(t){return t&&t.document&&t.location&&t.alert&&t.setInterval},isElement:function(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}}}(SYST),function(t){"use strict";var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=function(){this.__instance_SYST__="SYST Tools",this.__Name__="Tools"};t.Tools=function(){return t.extendClass(arguments,n)},t.T=n.prototype={trigger:function(e,n,i,r){var s;if(e&&n&&""!==n){n=-1!==n.search(/^(on)/i)?n:"on"+n,s=function(n){t.V.isFunction(r)&&r.call(e,n,i)};try{e[n]=s}catch(o){throw new Error(e+"不存在"+n+"方法 <::>")}}},hoadEvent:function(t,e){var n=[];t=t||window;for(var i=2;i<arguments.length;i++)n.push(arguments[i]);return function(i){if(i&&"object"==typeof i&&(i.preventDefault(),i.stopPropagation()),n.push(i),!t[e])throw new Error(e+" 函数未定义！");t[e].call(t,i,n)}},trim:function(e){return t.V.isString(e)?e.replace(/^\s*|\s*$/gi,""):""},rtrim:function(e,n,i){if(!t.V.isString(e))return"";if(n){var r;return r=i?new RegExp("\\"+n+"*","gi"):new RegExp("^(\\"+n+")*|(\\"+n+")*$","gi"),e.replace(r,"")}return this.trim(e)},indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1},arrRemove:function(t,e){var n=this.indexOf(t,e);return n>=0&&t.splice(n,1),t},toFirstUpperCase:function(t){return t.replace(/^(\w)?/i,function(t,e){return e.toUpperCase()})},F2C:function(t){for(var e="",t=t.replace(/\s*/gi,""),n=0;n<t.length;n++){var i=t.charCodeAt(n);e+=12288!=i?i>65280&&65375>i?String.fromCharCode(i-65248):String.fromCharCode(i):String.fromCharCode(32)}return e=e.replace(/\s*/gi,""),e.toUpperCase()},escapeHtml:function(t){return t.replace(/&(?![\w#]+;)|[<>"']/gi,function(t){return e[t]})},dateFm:function(t){return 10>t?"0"+t:t},setDateFormat:function(e,n){function i(t,e){return t.length>1?this.dateFm(e):e}return timestamp?(n=n||"yyyy-mm-dd hh:ii:ss",(e=/^\d+$/gi.test(e)||/\d+\/+/gi.test(e)?new Date(e):t.V.isDate(e)?e:null)?n=n.replace(/(y+)/i,function(t){var n=""+e.getFullYear();return t.length>=4?n:n.substr(t.length)}).replace(/(m+)/i,function(t){return i(t,e.getMonth()+1)}).replace(/(d+)/i,function(t){return i(t,e.getDate())}).replace(/(h+)/i,function(t){return i(t,e.getHours())}).replace(/(i+)/i,function(t){return i(t,e.getMinutes())}).replace(/(s+)/i,function(t){return i(t,e.getSeconds())}):null):""},dateFormat:function(t,e){return this.setDateFormat(t,e)},setDateFormatCN:function(t,e){var n=["年","月","日","时","分","秒","毫秒"],i=this.setDateFormat(t,e).split(/[-:\s]+/gi);if(!i||0===i.length)return"";for(var r=0;r<i.length;++r)i[r]=(3===r?" ":"")+i[r]+n[r];return i.join("")},dateFormatCN:function(t,e){return this.setDateFormatCN(t,e)},getDateDiff:function(t,e){var n=Date.parse(e)-Date.parse(t),i=Math.floor(n/864e5),r=n%864e5,s=Math.floor(r/36e5),o=r%36e5,a=Math.floor(o/6e4),c=o%6e4,u=Math.round(c/1e3);return{days:i,hours:s,minutes:a,seconds:u}},randomChar:function(t,e){for(var n,i=48,r=122,s=0,o=t,a="",e=!0,c=[58,59,60,61,62,63,64,91,92,93,94,95,96],u=[48,49,73,76,79,108,111];o>s;++s)n=Math.floor(Math.random()*i+Math.random()*r),n>=i&&r>=n&&-1===c.indexOf(n)?e===!0?-1===u.indexOf(n)?a+=String.fromCharCode(10,n):o++:a+=String.fromCharCode(10,n):o++;return a.replace(/[\n\t\r]*/gi,"")},params:function(e,n){var i="?";if(this._pars&&this._pars[e])return this._pars[e];var r="";if(r=t.V.isEmpty(n)?location.href.split(i)[1]:/\?+/i.test(n)?n.split(i)[1]||"":n,t.V.isEmpty(r))return{};var s=r.replace(/^\?/,"").split("&");if(!s||[]===s)return{};for(var o=0,a=s.length,c={};a>o;++o){var u=s[o].split("=");u[0]&&""!==u[0]&&(c[u[0]]=decodeURI(u[1])||null)}return this._pars=c,e?decodeURI(c[e]):c},getParams:function(e,n){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r="";return r=t.V.isEmpty(n)?window.location.search.substr(1).match(i):(n.split("?")[1]||"").match(i),r?decodeURI(r[2]):null},paramData:function(e,n){if(t.V.isEmpty(e)||!t.V.isObject(e))return"";var i=e,r="";for(var s in i)r+="&"+s+"="+encodeURI(i[s]);return r=r.substr(1),n===!0?"?"+r:r},serialize:function(t,e){return this.paramData(t,e)},unserialize:function(t){return this.params(null,t)},jumpTo:function(e,n){var e=e||"#";t.V.isString(n)?e=e+"?"+n:t.V.isObject(n)&&(e+=t.T.paramData(n,!0)),location.href=e},redirect:function(t,e){this.jumpTo(t,e)},displace:function(t){if(t){for(var e=0,n=[],i=/\%[s|d|f]?/gi,r=1,s=arguments.length;s>r;++r)n.push(arguments[r]);var o=t.replace(i,function(t){return n[e++]});return o}},Cookie:function(t,e,n){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(e))||null===e||void 0===e)){if(n=n||{},null!==e&&void 0!==e||(n.expires=-1),"number"==typeof n.expires){var i=n.expires,r=n.expires=new Date;r.setDate(r.getDate()+i)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",n.raw?e:encodeURIComponent(e),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=e||{};for(var s,o=n.raw?function(t){return t}:decodeURIComponent,a=document.cookie.split("; "),c=0;s=a[c]&&a[c].split("=");c++)if(o(s[0])===t)return o(s[1]||"");return null},_Cookies:function(e,n){var i=this;if(e)if(t.V.isObject(e))t.T.each(Object.keys(e),function(t){i.Cookie(t,e[t],n)});else if(t.V.isArray(e)){var r,s={};if(1===e.length)r=e[0],s[r]=i.getCookie(r);else for(var o=0,a=e.length;a>o;++o)r=e[o],s[r]=i.getCookie(r);return s}},getCookie:function(e){return t.V.isString(e)?this.Cookie(e):this._Cookies(e)},setCookie:function(e,n,i){return t.V.isString(e)?this.Cookie(e,n,i):this._Cookies(e,i)},each:function(e,n,i){if(t.V.isObject(e)){var r=0;for(var s in e)e.hasOwnProperty(s)&&n.call(i||e,e[s],r++,s)}else{if(!t.V.isArray(e))throw new SyntaxError("args1 is must Object or Array");for(var o=0,a=e.length;a>o;++o)n.call(i||e,e[o],o)}}}}(SYST),function(t){"use strict";var e=1,n=2,i=3,r=t.Promise=function(t,n){this.STATE=e,this._fulfils=[],this._rejecteds=[],this.args=[],this.errs=[],this.data=null,this._bunchFulfil=!1,this._bunchReject=!1,this.then(t,n)};t.Promise.prototype={then:function(r,s){return this.STATE===e?(t.V.isFunction(r)&&this._fulfils.push(r),t.V.isFunction(s)&&this._rejecteds.push(s)):this.STATE===n?this.resolve():this.STATE===i&&this.reject(),this},done:function(t){return this.then(t)},success:function(t){return this.then(t)},"catch":function(t){return this.then(null,t)},error:function(t){return this.then(null,t)},resolve:function(t,e){this.STATE=n,t&&(this.data=t,this.args.push(t)),this._bunchFulfil=e!==!1?this._bunchFulfil:e;var i=this._fulfils.shift();if(!i||"function"!=typeof i)throw new TypeError("no found a function object to [then|all|done|success]");this._bunchFulfil?this._fulfils.push(i):(this._bunchFulfil=!1,i.call(this,t,this.args))},reject:function(t,e){this.STATE=i,t&&this.errs.push(t),this._bunchReject=e!==!1?this._bunchReject:e;var n=this._rejecteds.shift();if(!n||"function"!=typeof n)throw new TypeError("no found a function object to [then|catch|error]");this._bunchReject?this._rejecteds.push(n):(this._bunchReject=!1,n.apply(this,this.errs))},all:function(e){if(!t.V.isArray(e))throw new TypeError("args me be a array, queue element is be function");return this._bunchFulfil=!0,this._bunchReject=!0,t.T.each(e,function(e){t.V.isFunction(e)&&e()}),this}},t.P=t.Promise=r}(SYST),function(t){"use strict";var e=t.$;if(!e)throw new Error("doRequest: $不存在，此方法依赖于(jQuery||Zepto||Ender)");t.httpConfig={};var n=function(){this.__instance_SYST__="SYST Http",this.__name__="SYST Http"};t.Http=function(){return t.extendClass(arguments,n)},n.prototype={load:function(t,n,i,r){e(t).load(n,i,r)},ajax:e.ajax,get:e.get,getJSON:e.getJSON,getScript:e.getScript,post:e.post,doRequest:function(n,i,r,s,o){function a(){return t.V.isFunction(S)&&(v.beforeSend=S.apply(m)),v.beforeSend===!1?!1:void 0}function c(e,n,i,r){var s;return t.V.isFunction(T)&&(s=T.call(m,e,n,i,r)),s}function u(e,n,i){var r;return t.V.isFunction(y)&&(r=y.call(m,e,n,i)),r}function h(e,n,i,r){var s;return t.V.isFunction(w)&&(s=w.call(m,e,n,i,r)),s}function l(e,n,i,r){t.V.isFunction(_)&&_();var s;return t.V.isFunction(b)&&(s=b.call(m,e,n,i,r)),s}var f,p,d,_,m,g=this,v={};if(i&&"object"==typeof i&&n&&""!=n){g._ajaxCount=0,this.ajaxUrl=n,p=g.ajaxDataType||t.httpConfig.ajaxDataType||"json";var S=g.ajaxBefore||t.httpConfig.ajaxBefore,T=g.ajaxSuccess||t.httpConfig.ajaxSuccess,y=g.ajaxError||t.httpConfig.ajaxError,w=g.ajaxComplete||t.httpConfig.ajaxComplete,b=g.ajaxEnd||t.httpConfig.ajaxEnd;if(t.V.isObject(o)&&(f=o.type||g.ajaxType||t.httpConfig.ajaxType||"POST",p=o.dataType||g.ajaxDataType||t.httpConfig.ajaxDataType||"json",d=o.commonData||g.commonData||t.httpConfig.commonData||{},_=o.commonHandler,v=o,m=o.callTarget||g),a()!==!1){var E=t.extend(v,{url:n,type:f,data:t.extend(i,d),dataType:p,success:function(e,n,i,s){l(e,n,i,s);var o=c(e,n,i,s);o!==!1&&t.V.isFunction(r)&&r.call(m,e,n,i,s)},error:function(e,n){var i=e.response;try{i=JSON.parse(i)}catch(r){}l(i,e,n);var o=u(i,e,n);o!==!1&&t.V.isFunction(s)&&s.call(m,i,e,n)},complete:function(t,e,n,i){h(t,e,n,i)}});e.ajax(E),g._ajaxCount++}}},doAjax:function(t,e,n,i,r){this.doRequest(t,e,n,i,r)},fetch:function(){return function(n,i,r){i=i||{};var s=(i.headers||{},(i.method||"post").toUpperCase()),o=i.body;if(!1 in window){var a=new t.Promise,c=$.extend(i,{url:n,data:o,type:s,dataType:r,success:function(t){a.resolve(t)},error:function(t){a.reject(t)}});return e.ajax(c),a}return"GET"==s||"HEAD"==s?(t.V.isObject(o)?n+=t.T.paramData(o,!0):t.V.isString(o)&&(n+="?"+o),i.body=null,delete i.body):t.V.isObject(o)&&(i.body=JSON.stringify(o)),window.fetch(n,i).then(function(e){return t.V.isFunction(e[r])&&e[r]()})}}(),socket:function(t,e){if(!1 in window)throw new ReferenceError("WebSocket api is not support!");return new WebSocket(t,e)}}}(SYST),function(t){"use strict";t.tplConfig={open:"<%",close:"%>"};var e,n,i,r=/\\|\'|\r|\n|\u2028|\u2029/g,s="([\\s\\S]+?)",o=/^=+\s*|\s*$/gi,a=t.tplConfig.open,c=t.tplConfig.close,u={},h={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},l=function(t){return"\\"+h[t]},f=function(t){var e=[];for(var n in t)e.push(t[n].source);return e.join("|").replace(/|$/i,"")},p=function(i){i=i||t.tplConfig,a=i.open||t.tplConfig.open,c=i.close||t.tplConfig.close,e={execter:new RegExp(a+s+c,"g"),exporter:new RegExp(a+"\\s*="+s+c,"g"),escaper:new RegExp(a+"\\s*=="+s+c,"g")},n=new RegExp(f(e),"g")},d=/^include\(\s*([^,]+?)\s*,\s*([^,]+?)\s*\)/i,_=function(e,s,h,f){var p=[],_=[],g='var _s=""; with($d || {}){ ',v="",S=0,s=s;if(h){if(t.V.isObject(h))for(var T in h)v+=h[T].toString()+";";else if(t.V.isFunction(h))v+=h.toString()+";";else{if(!t.V.isString(h)||!/function\(\)/gi.test(h))throw new EvalError("helper can be function");v+=h.replace(/;$/i,"")+";"}g=v+g}if(g="var each = SYST.T.each;"+g,e=[a,"if(true){",c,e,a,"}",c].join(""),e.replace(n,function(n,i,s,o,a){var c=e.slice(S,a).replace(r,l);return c=c&&""!=c?"_s+='"+c+"';":"",S=a+n.length,_.push(c),p.push(t.T.trim(i)),n}),0===p.length)return e;for(var y,w,b=0,E=p.length;E>b;++b){if(y=p[b],w=_[b+1],-1!==y.search(/^\s*={2}/))y=y.replace(o,""),y="if(!!"+y+"){ _s+=(SYST.T.escapeHtml("+y+')); }else{ _s+=""; }';else if(/^=[^=]+?/i.test(y))y=y.replace(o,""),y="if(!!"+y+"){ _s+=("+y+');}else{_s+="";}';else if(d.test(y)){var V;y.replace(d,function(e,n,i){n&&""!==n&&(V=setInterval(function(){t.$(i)[0]&&(clearInterval(V),t.$(i).load(n))},1e3/60))}),y=""}g+=(y||"")+(w||"")}return g=""+g+" }; return _s;",m=new Function("$d",g),u[i]=m,m.call(f||this,s)},m=function(e,n,r,s,o){if(!e)throw new SyntaxError("no found template content");var a,c,h,l="";if(i=e,u[i])return h=u[i],h.call(o||this,n);if(p(s),-1!==e.search(/[<|>|\/]/i))l=t.T.trim(e);else if(t.V.isString(e)?(c=e.replace(/^#/i,""),a=document.getElementById(c)):t.V.isElement(e)&&(a=e),a){var f=/^(TEXTEREA|INPUT)$/i.test(a.nodeName)?a.value:a.innerHTML;l=t.T.trim(f)}return _(l,n,r,o)};t.Render=m,t.T.render=m}(SYST),function(t){"use strict";function e(t,e,s,o,a,c){if(!s)throw new ReferenceError("没有添加事件名称");var a=a||"on";t||(t=window),i(t.selector)?"on"==a?$(window).off().on(s,r(e,o)):$(window).off(s,r(e,o)):n(t.selector)?"on"==a?$(t.selector).off().on(s,r(e,o)):$(t.selector).off(s,r(e,o)):"on"==a?$(c||"body").undelegate(t.selector,s,r(e,o)).delegate(t.selector,s,r(e,o)):$(c||"body").undelegate(t.selector,s)}function n(t){return t==document||"document"==t||"html"==t||"body"==t}function i(t){return t==window||"window"==t}var r=t.T.hoadEvent,s=function(t,n,i,r,s,o){e(t,n,i,r,s,o)};s.initEvent=function(t,n,i,r,s,o){e(t,n,i,r,s,o)},s.uninitEvent=function(t,e,r,s){i(t)?$(window).off(e,r):n(t)?$(t).off(e,r):$(s).undelegate(t,e,r)},t.Events=s}(SYST),!function(t){var e=t.$||$,n=/\{\{\s*([^\{]*?)\s*\}\}/gi,i=Array.prototype.slice,r=("observe"in Object,/^[^\w]*/gi),s={toUpperCase:function(t){return t.toUpperCase()},toLowerCase:function(t){return t.toLowerCase()}};trimAttrValue=function(e){return t.T.rtrim(e.replace(/[\s\{\}]*/gi,""),"|")};var o="st-model",a="st-prop",c="st-template",u="st-style",h="st-repeat",l="st-item",f="st-vid",p="st-filter",d="bindStPropName",_="rawHtml",m="innerHTML",g="\\{\\{\\s*",v="\\s*\\}\\}",S="gi",T=new RegExp(g+"(\\$value)?"+v,S),y=new RegExp(g+"(\\$index)?"+v,S),w=new RegExp(g+"(\\$first)?"+v,S),b=new RegExp(g+"(\\$last)?"+v,S),E=new RegExp(g+"(\\$key[^\\}]*?)?"+v,S),V=new RegExp(g+"(\\$valu?e?[^\\}]*?)?"+v,S),j=function(t){if(!t)throw new ReferenceError("args 1 can ben SYST.Model");this._reset(t)};j.prototype={init:function(){this._init()},addListener:function(t,e){this._getModelTags(t),e&&this.model.set(t,e)},removeListener:function(t){return t?(this._deleteBinds(t),this):this.removeListenerAll()},removeListenerAll:function(){return this._reset(),this},update:function(e,n){!t.V.isEmpty(e)&&t.V.isString(e)&&(n&&(this.model.props[e]=n),this.bindElements[e]&&this.updateBindProps(e),this.bindStyles[e]&&this.updateBindStyles(e),this.bindRepeats[e]&&this.updateBindRepeats(e))},reset:function(t){this._reset(t),this._getBindModelTags()},updateBindProps:function(t){this._makeProps(t)},updateRenderTemplate:function(e,n){function i(e,i){t.V.isArray(i)&&t.T.each(i,function(t){s._renderTemplate(e,t,n)})}var r,s=this,o=this.bindTemplates;if(e)r=o[e],i(e,r);else for(var a in o)r=o[a],i(a,r)},updateBindStyles:function(t){this._makeStyles(t)},updateBindRepeats:function(t){this._makeRepeats(t)},_init:function(){return this.model.props?void this._getBindModelTags():this},_reset:function(t){this.model=t||this.model,this.bindModelTags=[],this.bindElements={},this.bindTemplates={},this.bindStyles={},this.bindRepeats={}},_deleteBinds:function(e){var n=[this.bindElements,this.bindTemplates,this.bindRepeats,this.bindStyles];!function(n){t.T.each(n,function(t){t[e]=null,delete t[e]})}(n)},_getModelTags:function(n){var r,s;this.bindModelTags=i.call(e("["+o+"="+this.model.$mid+"]")),t.T.each(this.bindModelTags,function(t){r=t.getAttribute(o),s=e(t),this._getBindElements(s,n),this._getBindTemplates(s,n),this._getBindStyles(s,n),this._getBindRepeats(s,n)},this)},_getBindModelTags:function(){this._getModelTags()},_getBindElements:function(t,e){this._getBindElementForAttriburte(t,e),this._getBindElementForContent(t,e),this._makeProps()},_getBindElementForAttriburte:function(e,n){var r,s,o;s=e,r=n?i.call(s.find("["+a+"="+n+"]")):i.call(s.find("["+a+"]")),0!==r.length&&t.T.each(r,function(t){o=this._getRootPropName(t.getAttribute(a)),this._toBindElements(o,t)},this)},_getBindElementForContent:function(e,r){for(var s,o,a,c=this,u=e;null!=(s=n.exec(u.html()));)if(o=i.call(u.find(":contains("+s[0]+")")).reverse(),o&&0!==o.length){if(a=c._getRootPropName(s[0]),r&&a!==r)break;t.T.each(o,function(t){t[_]=t[m],c._toBindElements(a,t)})}},_toBindElements:function(e,n){n[d]=e,t.V.isArray(this.bindElements[e])?-1===t.T.indexOf(this.bindElements[e],n)&&this.bindElements[e].push(n):(this.bindElements[e]=[],this.bindElements[e].push(n))},_makeProps:function(e){var n=this.bindElements;e&&!n[e]||t.T.each(n,function(e,n,i){var r=e||this.bindElements[i];t.V.isArray(r)&&0!==r.length&&t.T.each(r,function(t){this._makeProp(i,t)},this)},this)},_makeProp:function(t,e){if(null!=this.model.props[t]){var i=this,r=[],s=e.getAttribute(p),o=e.getAttribute(a),c=this._getProp(e);if(o&&(o=this._getPropName(o),r=this._getFilters(o)),s&&(r=r.concat(this._getFilters(s,!0)),c=i._makeFilters(c,this._getFilters(s,!0))),/TEXTAREA|INPUT/.test(e.nodeName))/radio|checkbox/.test(e.type)?e.value==c&&(e.checked=!0):(e.value=c,e.onkeyup=function(t){var n=this.value;n=i._makeFilters(n,r),i.model.set(o,n),e.value=i._getProp(e)});else if(/SELECT/.test(e.nodeName))e.value=c,e.onchange=function(t){var n=this.value;n=i._makeFilters(n,r),i.model.set(o,n),e.value=i._getProp(e)};else{if(e.getAttribute(h))return;o=e.getAttribute(a),o||!e[_]?e[m]=i._getProp(e):e[m]=e[_].replace(n,function(t,n){return i._getProp(e,n)})}}},_getProp:function(e,n){var i,s,o=n||function(){var t=e.getAttribute(a);return t?t.replace(r,""):null}();return o?(s=this._getFilters(o),o=this._getPropName(o),i=/\./gi.test(o)?this._getFinalPropValue(o):this.model.props[o],null==i?"":(t.V.isFunction(i)&&(i=i.apply(this.model)),i=this._makeFilters(i,s))):""},_getFinalPropValue:function(e){for(var n,i=e.split("."),s=0,o=this.model.props[i[0].replace(r,"")]||"";t.V.isObject(o)&&null!=(n=o[i[++s]]);)o=o[i[s]];return o},_getFilters:function(t,e){var n=trimAttrValue(t).split("|");return!e&&n.shift(),n},_makeFilters:function(e,n){if(!t.V.isArray(n)||0===n.length)return e;var i,r=e;return t.T.each(n,function(e){i=this.model[t.T.trim(e)],t.V.isFunction(i)?r=i.apply(this.model,[r]):(i=s[e]||t.T[e],t.V.isFunction(i)&&(r=i(r)))},this),r},_getRootPropName:function(t){return trimAttrValue(t).split(/\.|\|/gi)[0]},_getPropName:function(t){return trimAttrValue(t).split("|")[0]},_getBindTemplates:function(e,n){var i,r;i=this._getElements(n,e,c),0!==i.length&&t.T.each(i,function(t){r="#"+t.getAttribute(c),this._toBindTemplates(r,t),this._renderTemplate(r,t)},this)},_toBindTemplates:function(e,n){this.bindTemplates[e]||(this.bindTemplates[e]=[]),-1===t.T.indexOf(this.bindTemplates[e],n)&&this.bindTemplates[e].push(n)},_renderTemplate:function(n,i,r){if(!this.model.props||0!==Object.keys(this.model.props).length){i=e(i),r=t.V.isObject(r)?t.extend(this.model.props,r):this.model.props;var s="";t.V.isObject(r)&&(s=t.T.render(n,r,null,{open:"{{",close:"}}"})),i.html(s)}},_getBindStyles:function(e,i){var r,s,o;o=this._getElements(i,e,u),0!==o.length&&(t.T.each(o,function(t){for(r=t.getAttribute(u);null!=(s=n.exec(r));){t[u]=r,t.removeAttribute(u);var e=this._getPropName(s[1]);this._toBindStyles(e,t)}},this),this._makeStyles(i))},_toBindStyles:function(e,n){var i=this.bindStyles[e];i||(i=this.bindStyles[e]=[]),-1===t.T.indexOf(i,n)&&i.push(n)},_makeStyles:function(e){var n=this._getBinds(e,this.bindStyles);t.T.each(n,function(t,e,n){this._makeStyle(n,t)},this)},_makeStyle:function(e,i){if(e in this.model.props){var r,s=this,i=i||this.bindStyles[e];t.V.isArray(i)&&t.T.each(i,function(e){r=e[u],r=r.replace(n,function(t,e){if(/\|/gi.test(e)){var n=s._getPropName(e),i=s.model.props[n];return s._makeFilters(i,s._getFilters(e))}return s.model.props[e]});var i=r.split(";");i&&t.T.each(i,function(t){var n=t.split(":");n&&$(e).css(n[0],n[1])})})}},_getBindRepeats:function(e,n){var i,r,s;s=this._getElements(n,e,h),0!==s.length&&(t.T.each(s,function(t){i=t.getAttribute(h),r=t.outerHTML,t.rawOuterHTML=r,t.parent=t.parentNode,this._toBindRepeats(i,t)},this),this._makeRepeats())},_toBindRepeats:function(e,n){var i=this.bindRepeats[e];i||(this.bindRepeats[e]=[],i=this.bindRepeats[e]),-1===t.T.indexOf(i,n)&&i.push(n)},_makeRepeats:function(e){var n=this._getBinds(e,this.bindRepeats);t.T.each(n,function(t,e,n){this._makeRepeat(n,t)},this)},_makeRepeat:function(e,n){if(e in this.model.props&&n&&0!==n.length){var r,s,o="",a=0,c=this.model.get(e);t.T.each(n,function(e){r=this._removeBindAttr(e),s=e.getAttribute(l),t.V.isEmpty(s)||(T=new RegExp(g+"(\\$?"+s+"[^\\{]*?)"+v,S)),t.V.isArray(c)?(a=c.length,t.T.each(c,function(t,e){o+=this._replaceBindsArray(r,t,e,a-1,s)},this)):t.V.isObject(c)&&t.T.each(c,function(t,e,n){o+=this._replaceBindObject(r,n,t,e)},this);var n=i.call($(e.parent).find("["+f+"]"));n[0]?(e.newFirstChild=n[0],n.shift(),t.T.each(n,function(t){$(t).remove()}),$(e.newFirstChild).replaceWith(o)):$(e).replaceWith(o)},this)}},_removeBindAttr:function(t){var e=$(t.rawOuterHTML);return e.removeAttr(h).removeAttr(l).attr(f,Date.now()),e=e[0].outerHTML},_replaceBindsArray:function(e,i,r,s,o){var a,c,u=this,h={},l={open:"{{",close:"}}"};return e.replace(T,function(t,e){a=u._getFilters(e),c=u._makeFilters(i,a)}),t.V.isObject(c)?(e=e.replace(/\{\{/gi,"{{="),h={$index:""+r,$first:0===r?"true":"false",$last:r===s?"true":"false"},h[o]=i,e=t.T.render(e,h,null,l)):e=e.replace(T,function(){return c}).replace(y,function(){return r}).replace(w,function(){return 0===r}).replace(b,function(){return r===s}).replace(n,function(t,e){return u.model.has(e)?u.model.get(e):t}),e},_replaceBindObject:function(t,e,n,i){function r(t,e){var n=s._getFilters(e);return s._makeFilters(t,n)}var s=this;return t=t.replace(E,function(t,n){return r(e,n)}).replace(V,function(t,e){return r(n,e)}).replace(y,function(){return""+i})},_getElements:function(t,e,n){var r;return r=t?i.call(e.find("["+n+"="+t+"]")):i.call(e.find("["+n+"]"))},_getBinds:function(t,e){var n={};return t?n[t]=e[t]:n=e,n}},t.Watcher=j}(SYST),function(t,e){"use strict";var n=(t.$,"observe"in Object,function(){this.__instance_SYST__="SYST Model",this.__name__="SYST Model",this.autoWatcher=!0,this.watcher=null});t.Model=function(){var e=t.extendClass(arguments,n);return e._initialize(),e},n.prototype={_initialize:function(){this.$http=this.$http||new t.Http,this.props=this.props||{},this.watcher=new t.Watcher(this),t.shareModel.add(this.$mid||null,this),this.init&&this.init.apply(this,arguments),(this.$mid||this.autoWatcher!==!1)&&this.watcher.init()},generateApi:function(e,n,i){var r=this;if(t.V.isArray(e)&&t.T.each(e,function(t,e){r._generateApi(t,n[t],i)}),t.V.isObject(e))for(var s in e)this._generateApi(s,e[s],i)},_generateApi:function(e,n,i){function r(e,r,o,a){i=t.extend(i,a),s.$http.doAjax(n,e,r,o,i)}var s=this;i=t.V.isObject(i)&&i||{},i.callTarget=this,"defineProperty"in Object?Object.defineProperty(s,e,{value:r}):s[e]=r},get:function(t){return this.props[t]},set:function(e,n){function i(t,e){r.props[t]=e,r._watchProrp(t,e)}if(t.V.isEmpty(e))return this;var r=this;if(t.V.isObject(e))for(var s in e)i(s,e[s]);else t.V.isString(e)&&e.length>0&&i(e,n);return r._watchTemplate(),this},add:function(t,e){this.set(t,e)},has:function(t){return Boolean(this.props[t])},removeProps:function(e){return t.V.isString(e)?this.remove(e):t.V.isArray(e)?t.T.each(e,function(t){this.remove(t)},this):t.V.isObject(e)?t.T.each(e,function(t,e,n){this.remove(n)},this):(this.watcher.removeListener(),this.props={}),this},removePropsAll:function(){this.removeProps()},remove:function(t){return t&&""!=t?(this.props[t]=null,delete this.props[t],this.watcher.removeListener(t),this):this},getItem:function(t,n){var i=(n?e.sessionStorage:e.localStorage).getItem(t);try{i=JSON.parse(i)}catch(r){}return i},setItem:function(n,i,r){function s(n,i){(t.V.isObject(i)||t.V.isArray(i))&&(i=JSON.stringify(i)),(r?e.sessionStorage:e.localStorage).setItem(n,i)}if(t.V.isObject(n))for(var o in n)s(o,n[o]);else{if(!("string"==typeof n&&n.length>0))return this;s(n,i)}},hasItem:function(t,n){return Boolean((n?e.sessionStorage:e.localStorage).getItem(t))},removeItem:function(t,n){(n?e.sessionStorage:e.localStorage).removeItem(t)},removeItems:function(e,n){t.V.isString(e)?this.removeItem(e,n):t.V.isArray(e)?t.T.each(e,function(t){this.removeItem(t,n)},this):n?sessionStorage.clear():localStorage.clear()},_watchProrp:function(t,e){this.watcher&&this.watcher.update(t)},_watchTemplate:function(){this.watcher&&this.watcher.updateRenderTemplate()}}}(SYST,window),function(t){"use strict";t.shareModel={models:{},add:function(e,n){t.V.isEmpty(e)&&(e=(new Date).getTime()+Math.random()),this.models[e]=n},get:function(t){var e=this.models;return e[t]?e[t]:null},remove:function(t){var e=this.models,n=e[t];return n&&(e[t]=null,delete e[t]),n},has:function(t){return!!this.models[t]}}}(SYST),function(t,e){"use strict";var n=function(){this.__instance_SYST__="SYST View",this.__Name__="SYST View"};t.View=function(){var e=t.extendClass(arguments,n);return e._initialize(),e},n.prototype={_initialize:function(){this.model=this.model||new t.Model,this.container=this.container||"body",this.template=null,this.container=t.$(this.container),this.containerSelector=this.container.selector,!this.unInit&&this.init&&this.init.apply(this),this.events&&this.events!={}&&t.V.isObject(this.events)&&this.onEvent()},destroy:function(){return this.container.html(""),this},handEvent:function(t,e){for(var n=this,i=[],r=2;r<arguments.length;r++)i.push(arguments[r]);return function(r){i.push(e),i.push(r),t.apply(n,i)}},hoadEvent:t.T.hoadEvent,_parseEvent:function(e){function n(t,e,n){c.push(t),a.push(e),u.push(n)}if(!e||0==e.length||e==={})return this;var i,r,s,o,a=[],c=[],u=[];for(var h in e){var l=e[h];if(t.V.isObject(l))for(var f in l)i=this._parseString(l,f),r=i[0],s=i[1],o=i[2],n(r,s,o);else i=this._parseString(e,h),r=i[0],s=i[1],o=i[2],n(r,s,o)}return{events:a,elements:c,functions:u}},_autoHandleEvent:function(e){var n=this._parseEvent(this.events),i=n.events,r=n.elements,s=n.functions;if(!i||0==i.length||i.length=={})return this;for(var e=e||"on",o=0,a=i.length;a>o;o++){if(!i[o])throw new Error("对象侦听"+i[o]+"不存在");if(!s[o])throw new Error("对象"+this+"不存在"+s[o]+"方法");if(!r[o])throw new Error("事件函数"+s[o]+"不存在");t.Events($(r[o]),this,i[o],s[o],e,this.containerSelector)}return this},_parseString:function(t,e){var n=$.trim(e).split(/\s+/gi),i=n[1].replace(/^\$*|[\(*]|[\)*]$/gi,"").replace(/"|'/gi,'"'),r=n[0].replace(/^\s*|\s*$/gi,""),s=t[e];return[i,r,s]},onEvent:function(e,n,i){return t.V.isEmpty(e)?this._autoHandleEvent("on"):t.Events.initEvent(t.V.isString(e)?$(e):e,this,n,i,"on",this.containerSelector),this},offEvent:function(e,n,i){return t.V.isEmpty(e)?this._autoHandleEvent("off"):t.Events.initEvent(t.V.isString(e)?$(e):e,this,n,i,"off",this.containerSelector),this},shareModel:t.shareModels}}(SYST,window),function(t){"use strict";var e=function(){this.__instance_SYST__="SYST Controller",this.__Name__="SYST Controller"};t.Controller=function(){var n=t.extendClass(arguments,e);return n._initialize(),n},t.Controller.prototype={shareModel:t.shareModel,_initialize:function(){this.defaultHost=this.defaultHost||location.host,t.V.isFunction(this.init)&&this.init.apply(this,arguments)},getModel:function(t){return t?this.shareModel.get(t):this.model},setModel:function(e){if(t.V.isEmpty(e))throw new Error("setModel: 参数有误");this.shareModel.add(e),this.model=e}}}(SYST),function(t){"use strict";var e=window.location,n=e.host,i=(e.port,e.origin||e.protocol+"//"+n,e.pathname,e.hash),r=("pushState"in history,"replaceState"in history,/\((.*?)\)/g),s=/(\(\?)?:\w+/g,o=/\*\w+/g,a=/[\-{}\[\]+?.,\\\^$|#\s]/g,c=function(){},u=function(t){return t.replace(/[#!]/gi,"").split("?")[0]},h=function(){this.__instance_SYST__="SYST Router",this.__Name__="SYST Router"};t.Router=function(){var e=t.extendClass(arguments,h);return e._initialize(),e},t.R=h.prototype={_initialize:function(){if(this._reset(),t.V.isObject(this.routes)&&this.routes!={}){var e=this.routes;for(var n in e)this._initRouters(n,e[n]);this.start()}},_reset:function(){this._cache=this._cache||{},this._stateCache=this._stateCache||[],this.routes=this.routes||null,this.container=this.container||"body",this.router=this.router||null,this.params=this.params||null,this.isRender=this.isRender||!1},_initRouters:function(e,n){t.V.isString(n)&&this[n]&&(n=this[n]),this._cache[e]=n},start:function(){var t=this.redirectTo;if(i&&""!==i){var e=u(i);this.switcher(e)}else t&&this._updateHash(t);return this._changeStart(),this},stop:function(){this._changeStop()},when:function(e,n){return t.V.isEmpty(e)?void 0:(t.V.isObject(n)?this._cache[e]=n:t.V.isFunction(n)&&(this._cache[e]=n.apply(this)),this)},switcher:function(e,n){if(this._cache&&{}!==this._cache){var i=this._getRouter(e),n=n||i.router;return n&&(this._cache[e]=n),this.params=t.T.params(null,window.location.href),this._exec(e),this}},renderBefore:c,rendering:c,rendered:c,getRouter:function(t){return this._getRouter(t)},_getRouter:function(e){if(this._cache&&this._cache!=={}){var n,i,r,s;for(r in this._cache)if(s=this._routeToRegExp(r),s.test(e)){i=r,n=this._cache[r];break}return n=t.V.isObject(n)?n:t.V.isFunction(n)?n.apply(this):null,{routeKey:i,router:n}}},_routeToRegExp:function(t){return t=t.replace(a,"\\$&").replace(r,"(?:$1)?").replace(s,function(t,e){return e?t:"([^/?]+)"}).replace(o,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,n,i){var r=e.exec(i).slice(1),s=e.exec(n).slice(1),o=[],a={};return t.V.isArray(r)&&r.length>0&&t.T.each(r,function(t){o.push(t?decodeURIComponent(t):null)}),t.V.isArray(s)&&s.length>0&&t.T.each(s,function(t,e){t&&(a[t.replace(/^[^\w]|[^\w]$/i,"")]=o[e])}),{paramsObject:a,params:o}},_exec:function(n){var i=this._getRouter(n),r=i.router,s=i.routeKey;this.router=r,this.router.route=s,t.V.isRegExp(s)||(n=this._routeToRegExp(s));var o=u(e.hash),a=this._extractParameters(n,s,o),c=a.paramsObject;a.params;this.params=t.extend(this.params,c),
this.router.params=this.params,this._onReady(),this._execRouter()},_execRouter:function(){var t=this,e=this.router;if(e){var n=e.container||this.container||"body";e.template?this._template(e.template,n,function(e){t._execMAction(e),t._onRender()}):t._execMAction()}},_execMAction:function(e){this.tpl=e,this.router.tpl=e;var n=this.router,i=n.view,r=n.action;r&&t.V.isFunction(r)&&r.call(this,i,this.params,e)},_changeStart:function(){this._changeStop(),window.addEventListener("hashchange",t.hoadEvent(this,"_changeHandler"),!1)},_changeStop:function(){window.removeEventListener("hashchange",t.hoadEvent(this,"_changeHandler"),!1)},_changeHandler:function(t){var e,n=this;this.router;this.oldURL="#"+t.oldURL.split("#")[1],this.newURL="#"+t.newURL.split("#")[1];var i=u(this.newURL);i&&(e=this._getRouter(i)),e&&e.router&&this._onDestroy(function(){n.router=e,n.switcher(i)})},_template:function(e,n,i){function r(e){t.V.isFunction(s.rendered)&&s.rendered.apply(s),i&&t.V.isFunction(i)&&i.call(s,e)}var s=this;this.container=t.$(n),t.V.isFunction(s.renderBefore)&&s.renderBefore.apply(s);var o=/^(load[\@|\!|\#|\>])+?/gi;o.test(e)?(e=e.replace(o,""),this.container.load(e,function(t){r(t)},function(t){throw new Error("load template is failed!")})):r(e)},_onReady:function(){var e,n=this.router;n&&t.V.isFunction(n.onReady)&&n.onReady.call(this),e=n.view,e&&(e.router=n,e.init&&e.init(n),e.offEvent().onEvent())},_onRender:function(){var e=this.router,n=this.tpl;(e.data||e.isRender||this.isRender)&&(n=t.T.render(n,e.data)),this.container.html(n),this.tpl=n,this.router.tpl=n,t.V.isFunction(e.onRender)&&e.onRender.call(this,n)},_onDestroy:function(e){var n,i,r,s,o=this.router;if(t.V.isObject(o))if(i=o.onDestroy,r=o.route,s=o._destroyState,n=o.view,n&&(o.view=null,delete o.view,n.offEvent()),t.V.isFunction(i)){var a=i.apply(this);a!==!1?(o._destroyState=!0,t.V.isFunction(e)&&e.apply(this)):(o._destroyState=!1,this._updateHash(r))}else t.V.isFunction(e)&&e.apply(this);else t.V.isFunction(e)&&e.apply(this)},_updateHash:function(t){window.location.hash="#!"+t.replace(/^#!/i,"")},_onAnimate:function(t,e){var n=this.router;if(n){var i=n.animate,r=n.animateDuration||300,s=this.container,t=t||"on";if(n&&s)switch(i){case"slide":"on"===t?s.slideDown(r,e):s.slideUp(100,e);break;case"fade":"on"===t?s.fadeIn(r,e):s.fadeOut(100,e);break;default:s.show()}}}}}(SYST),function(t){"use strict";var e=navigator.userAgent.toUpperCase(),n=-1!==e.indexOf("ANDROID"),i=-1!==e.indexOf("IPHONE OS"),r=!(!n&&!i),s=-1!==e.indexOf("MOBILE"),o=-1!==e.indexOf("IPAD"),a=!(!s&&!o),c=function(){this.__instance_SYST__="SYST Native",this.__Name__="SYST Native"};t.Native=function(){return t.extendClass(arguments,c)},t.N=c.prototype={isAndroid:n,isIos:i,isNative:r,isPhone:s,isPad:o,isMobile:a,callNative:function(t){}}}(SYST);