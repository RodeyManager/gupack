(function(t){"use strict";var e={};e.VERSION="2.0.45",e.AUTHOR="Rodey Luo";try{e.$=t.jQuery||t.Zepto||void 0}catch(n){throw new Error("$不存在，请先引入jQuery|Zepto插件，依赖其中一个"+n)}var i=function(t){var e,n=t,i={};for(e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i},r=function(t,e){if(!t)return e;if(!e)return t;var n=i(t);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n},o=function(t,n){var i,t=Array.prototype.slice.call(t),o=t[0],s=0,a={};if(e.V.isObject(o)){if("__instance_SYST__"in o){for(t.shift(),i=t.length;i>s;++s)a=r(a,t[s]);return a.__proto__=o,a}for(i=t.length;i>s;++s)a=r(a,t[s]);return a.__proto__=new n,a}return a.__proto__=new n};return e.extend=r,e.extendClass=o,e.clone=i,!1 in Object&&(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}),"object"==typeof module&&"object"==typeof module.exports?module.exports=e:t.SYST=e,e}).call(this,window),function(t){"use strict";var e=function(){this.__instance_SYST__="SYST Validate",this.__Name__="Validate"};t.Validate=function(){return t.extendClass(arguments,e)},t.V=e.prototype={isEmpty:function(t){return!t||0===t.length||null==t},isCN:function(t,e){return e?/^[\u4e00-\u9fa5]+$/.test(t):/[\u4e00-\u9fa5]+/gi.test(t)},isEmail:function(t){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/gi.test(t)},isURL:function(t){return/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/i.test(t)},isTel:function(t){return/^(\(\d{3,4}\)|\d{3,4}-)?\d{7,8}$/gi.test(t)},isMobile:function(t){return/^1[3|4|5|7|8]{1}\d{9}$/.test(t)},isZip:function(t){return/^\d{6}$/.test(t)},isDateLocal:function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})$/.test(t)},isDateTime:function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},isTime:function(t){return/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},isNull:function(t){return null==t},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:function(t){return"[object Array]"===toString.call(t)},isDate:function(t){return"[object Date]"===toString.call(t)},isObject:function(t){return"[object Object]"===toString.call(t)},isFunction:function(t){return"function"==typeof t},isFile:function(t){return"[object File]"===toString.call(t)},isBlob:function(t){return"[object Blob]"===toString.call(t)},isBoolean:function(t){return"boolean"==typeof t},isdefined:function(t){return"undefined"!=typeof t},isRegExp:function(t){return"[object RegExp]"===toString.call(t)},isWindow:function(t){return t&&t.document&&t.location&&t.alert&&t.setInterval},isElement:function(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}}}(SYST),function(t){"use strict";var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=function(){this.__instance_SYST__="SYST Tools",this.__Name__="Tools"};t.Tools=function(){return t.extendClass(arguments,n)},t.T=n.prototype={trigger:function(e,n,i,r){var o;if(e&&n&&""!==n){n=-1!==n.search(/^(on)/i)?n:"on"+n,o=function(n){t.V.isFunction(r)&&r.call(e,n,i)};try{e[n]=o}catch(s){throw new Error(e+"不存在"+n+"方法 <::>")}}},hoadEvent:function(t,e){var n=[];t=t||window;for(var i=2;i<arguments.length;i++)n.push(arguments[i]);return function(i){if(i&&"object"==typeof i&&(i.preventDefault(),i.stopPropagation()),n.push(i),!t[e])throw new Error(e+" 函数未定义！");t[e].call(t,i,n)}},trim:function(e){return t.V.isString(e)?e.replace(/^\s*|\s*$/gi,""):""},rtrim:function(e,n,i){if(!t.V.isString(e))return"";if(n){var r;return r=i?new RegExp("\\"+n+"*","gi"):new RegExp("^(\\"+n+")*|(\\"+n+")*$","gi"),e.replace(r,"")}return this.trim(e)},indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1},arrRemove:function(t,e){var n=this.indexOf(t,e);return n>=0&&t.splice(n,1),t},toFirstUpperCase:function(t){return t.replace(/^(\w)?/i,function(t,e){return e.toUpperCase()})},F2C:function(t){for(var e="",t=t.replace(/\s*/gi,""),n=0;n<t.length;n++){var i=t.charCodeAt(n);e+=12288!=i?i>65280&&65375>i?String.fromCharCode(i-65248):String.fromCharCode(i):String.fromCharCode(32)}return e=e.replace(/\s*/gi,""),e.toUpperCase()},escapeHtml:function(t){return t.replace(/&(?![\w#]+;)|[<>"']/gi,function(t){return e[t]})},dateFm:function(t){return 10>t?"0"+t:t},setDateFormat:function(e,n,i){function r(t,e){e.push(i?o.dateFm(t):t)}if(!e)return"";var o=this,s=new Date(parseInt(e,10)),a=[],u=[];if(!n)return s.getFullYear()+"-"+this.dateFm(s.getMonth()+1)+"-"+this.dateFm(s.getDate())+" "+this.dateFm(s.getHours())+":"+this.dateFm(s.getMinutes())+":"+this.dateFm(s.getSeconds());var c=n.match(/[^\w\d\s]+?/i),l=c[0]||"-",h=c[1]||":",f=n.split(l)[0];return f=f.length<=2?(""+s.getFullYear()).substr(2):s.getFullYear(),r(f,a),/m+?/i.test(n)&&r(s.getMonth()+1,a),/d+?/i.test(n)&&r(s.getDate(),a),/h+?/i.test(n)&&r(s.getHours(),u),/i+?/i.test(n)&&r(s.getMinutes(),u),/s+?/i.test(n)&&r(s.getSeconds(),u),t.T.trim(a.join(l)+(u.length>0?" "+u.join(h):""))},setDateFormatCN:function(t,e,n){function i(t,e){return t.replace(e,function(){return u[c++]})}var r=/[-:\/\|_\.]/gi.test(t)?t:this.setDateFormat(t,e,n),o=r.split(" "),s=o[0],a=o[1],u=["年","月","日","时","分","秒"],c=0;return s=i(s,/[-\/\|_\.]/gi)+u[2],c++,a=i(a,/:/gi)+u[5],s+" "+a},getDateDiff:function(t,e){var n=Date.parse(e)-Date.parse(t),i=Math.floor(n/864e5),r=n%864e5,o=Math.floor(r/36e5),s=r%36e5,a=Math.floor(s/6e4),u=s%6e4,c=Math.round(u/1e3);return{days:i,hours:o,minutes:a,seconds:c}},randomChar:function(t,e){for(var n,i=48,r=122,o=0,s=t,a="",e=!0,u=[58,59,60,61,62,63,64,91,92,93,94,95,96],c=[48,49,73,76,79,108,111];s>o;++o)n=Math.floor(Math.random()*i+Math.random()*r),n>=i&&r>=n&&-1===u.indexOf(n)?e===!0?-1===c.indexOf(n)?a+=String.fromCharCode(10,n):s++:a+=String.fromCharCode(10,n):s++;return a.replace(/[\n\t\r]*/gi,"")},params:function(e,n){var i="?";if(this._pars&&this._pars[e])return this._pars[e];var r="";if(r=t.V.isEmpty(n)?location.href.split(i)[1]:/\?+/i.test(n)?n.split(i)[1]||"":n,t.V.isEmpty(r))return{};var o=r.replace(/^\?/,"").split("&");if(!o||[]===o)return{};for(var s=0,a=o.length,u={};a>s;++s){var c=o[s].split("=");c[0]&&""!==c[0]&&(u[c[0]]=decodeURI(c[1])||null)}return this._pars=u,e?decodeURI(u[e]):u},getParams:function(e,n){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r="";return r=t.V.isEmpty(n)?window.location.search.substr(1).match(i):(n.split("?")[1]||"").match(i),r?decodeURI(r[2]):null},paramData:function(e,n){if(t.V.isEmpty(e)||!t.V.isObject(e))return"";var i=e,r="";for(var o in i)r+="&"+o+"="+encodeURI(i[o]);return r=r.substr(1),n===!0?"?"+r:r},serialize:function(t,e){return this.paramData(t,e)},unserialize:function(t){return this.params(null,t)},jumpTo:function(e,n){var e=e||"#";t.V.isString(n)?e=e+"?"+n:t.V.isObject(n)&&(e+=t.T.paramData(n,!0)),location.href=e},redirect:function(t,e){this.jumpTo(t,e)},displace:function(t){if(t){for(var e=0,n=[],i=/\%[s|d|f]?/gi,r=1,o=arguments.length;o>r;++r)n.push(arguments[r]);var s=t.replace(i,function(t){return n[e++]});return s}},Cookie:function(t,e,n){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(e))||null===e||void 0===e)){if(n=n||{},null!==e&&void 0!==e||(n.expires=-1),"number"==typeof n.expires){var i=n.expires,r=n.expires=new Date;r.setDate(r.getDate()+i)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",n.raw?e:encodeURIComponent(e),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=e||{};for(var o,s=n.raw?function(t){return t}:decodeURIComponent,a=document.cookie.split("; "),u=0;o=a[u]&&a[u].split("=");u++)if(s(o[0])===t)return s(o[1]||"");return null},_Cookies:function(e,n){var i=this;if(e)if(t.V.isObject(e))t.T.each(Object.keys(e),function(t){i.Cookie(t,e[t],n)});else if(t.V.isArray(e)){for(var r,o={},s=0,a=e.length;a>s;++s)r=e[s],o[r]=i.getCookie(r);return o}},getCookie:function(e){return t.V.isString(e)?this.Cookie(e):this._Cookies(e)},setCookie:function(e,n,i){return t.V.isString(e)?this.Cookie(e,n,i):this._Cookies(e,i)},each:function(e,n,i){if(t.V.isObject(e)){var r=0;for(var o in e)e.hasOwnProperty(o)&&n.call(i||e,e[o],r++,o)}else{if(!t.V.isArray(e))throw new SyntaxError("args1 is must Object or Array");for(var s=0,a=e.length;a>s;++s)n.call(i||e,e[s],s)}}}}(SYST),function(t){"use strict";var e=1,n=2,i=3,r=t.Promise=function(t,n){this.STATE=e,this._fulfils=[],this._rejecteds=[],this.args=[],this.errs=[],this.data=null,this._bunchFulfil=!1,this._bunchReject=!1,this.then(t,n)};t.Promise.prototype={then:function(r,o){return this.STATE===e?(t.V.isFunction(r)&&this._fulfils.push(r),t.V.isFunction(o)&&this._rejecteds.push(o)):this.STATE===n?this.resolve():this.STATE===i&&this.reject(),this},done:function(t){return this.then(t)},success:function(t){return this.then(t)},"catch":function(t){return this.then(null,t)},error:function(t){return this.then(null,t)},resolve:function(t,e){this.STATE=n,t&&(this.data=t,this.args.push(t)),this._bunchFulfil=e!==!1?this._bunchFulfil:e;var i=this._fulfils.shift();if(!i||"function"!=typeof i)throw new TypeError("no found a function object to [then|all|done|success]");this._bunchFulfil?this._fulfils.push(i):(this._bunchFulfil=!1,i.call(this,t,this.args))},reject:function(t,e){this.STATE=i,t&&this.errs.push(t),this._bunchReject=e!==!1?this._bunchReject:e;var n=this._rejecteds.shift();if(!n||"function"!=typeof n)throw new TypeError("no found a function object to [then|catch|error]");this._bunchReject?this._rejecteds.push(n):(this._bunchReject=!1,n.apply(this,this.errs))},all:function(e){if(!t.V.isArray(e))throw new TypeError("args me be a array, queue element is be function");return this._bunchFulfil=!0,this._bunchReject=!0,t.T.each(e,function(e){t.V.isFunction(e)&&e()}),this}},t.P=t.Promise=r}(SYST),function(t){"use strict";var e=t.$;if(!e)throw new Error("doRequest: $不存在，此方法依赖于(jQuery||Zepto||Ender)");t.httpConfig={};var n=function(){this.__instance_SYST__="SYST Http",this.__name__="SYST Http"};t.Http=function(){return t.extendClass(arguments,n)},n.prototype={load:function(t,n,i,r){e(t).load(n,i,r)},ajax:e.ajax,get:e.get,getJSON:e.getJSON,getScript:e.getScript,post:e.post,doRequest:function(n,i,r,o,s){function a(){return t.V.isFunction(v)&&(_.beforeSend=v.apply(g)),_.beforeSend===!1?!1:void 0}function u(e,n,i,r){var o;return t.V.isFunction(S)&&(o=S.call(g,e,n,i,r)),o}function c(e,n,i){var r;return t.V.isFunction(T)&&(r=T.call(g,e,n,i)),r}function l(e,n,i,r){var o;return t.V.isFunction(y)&&(o=y.call(g,e,n,i,r)),o}function h(e,n,i,r){var o;return t.V.isFunction(w)&&(o=w.call(g,e,n,i,r)),o}var f,p,d,g,m=this,_={};if(i&&"object"==typeof i&&n&&""!=n){m._ajaxCount=0,this.ajaxUrl=n,p=m.ajaxDataType||t.httpConfig.ajaxDataType||"json";var v=m.ajaxBefore||t.httpConfig.ajaxBefore,S=m.ajaxSuccess||t.httpConfig.ajaxSuccess,T=m.ajaxError||t.httpConfig.ajaxError,y=m.ajaxComplete||t.httpConfig.ajaxComplete,w=m.ajaxEnd||t.httpConfig.ajaxEnd;if(t.V.isObject(s)&&(f=s.type||m.ajaxType||t.httpConfig.ajaxType||"POST",p=s.dataType||m.ajaxDataType||t.httpConfig.ajaxDataType||"json",d=s.commonData||m.commonData||t.httpConfig.commonData||{},_=s,g=s.callTarget||m),a()!==!1){var b=t.extend(_,{url:n,type:f,data:t.extend(i,d),dataType:p,success:function(e,n,i,o){h(e,n,i,o);var s=u(e,n,i,o);s!==!1&&t.V.isFunction(r)&&r.call(g,e,n,i,o)},error:function(e,n){var i=e.response;try{i=JSON.parse(i)}catch(r){}h(i,e,n);var s=c(i,e,n);s!==!1&&t.V.isFunction(o)&&o.call(g,i,e,n)},complete:function(t,e,n,i){l(t,e,n,i)}});e.ajax(b),m._ajaxCount++}}},doAjax:function(t,e,n,i,r){this.doRequest(t,e,n,i,r)},fetch:function(){return function(n,i,r){i=i||{};var o=(i.headers||{},(i.method||"post").toUpperCase()),s=i.body;if(!1 in window){var a=new t.Promise,u=$.extend(i,{url:n,data:s,type:o,dataType:r,success:function(t){a.resolve(t)},error:function(t){a.reject(t)}});return e.ajax(u),a}return"GET"==o||"HEAD"==o?(t.V.isObject(s)?n+=t.T.paramData(s,!0):t.V.isString(s)&&(n+="?"+s),i.body=null,delete i.body):t.V.isObject(s)&&(i.body=JSON.stringify(s)),window.fetch(n,i).then(function(e){return t.V.isFunction(e[r])&&e[r]()})}}(),socket:function(t,e){if(!1 in window)throw new ReferenceError("WebSocket api is not support!");return new WebSocket(t,e)}}}(SYST),function(t){"use strict";t.tplConfig={open:"<%",close:"%>"};var e,n,i,r=/\\|\'|\r|\n|\u2028|\u2029/g,o="([\\s\\S]+?)",s=/^=+\s*|\s*$/gi,a=t.tplConfig.open,u=t.tplConfig.close,c={},l={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},h=function(t){return"\\"+l[t]},f=function(t){var e=[];for(var n in t)e.push(t[n].source);return e.join("|").replace(/|$/i,"")},p=function(i){i=i||t.tplConfig,a=i.open||t.tplConfig.open,u=i.close||t.tplConfig.close,e={execter:new RegExp(a+o+u,"g"),exporter:new RegExp(a+"\\s*="+o+u,"g"),escaper:new RegExp(a+"\\s*=="+o+u,"g")},n=new RegExp(f(e),"g")},d=/^include\(\s*([^,]+?)\s*,\s*([^,]+?)\s*\)/i,g=function(e,o,l,f){var p=[],g=[],_='var _s=""; with($d || {}){ ',v="",S=0,o=o;if(l){if(t.V.isObject(l))for(var T in l)v+=l[T].toString()+";";else if(t.V.isFunction(l))v+=l.toString()+";";else{if(!t.V.isString(l)||!/function\(\)/gi.test(l))throw new EvalError("helper can be function");v+=l.replace(/;$/i,"")+";"}_=v+_}if(_="var each = SYST.T.each;"+_,e=[a,"if(true){",u,e,a,"}",u].join(""),e.replace(n,function(n,i,o,s,a){var u=e.slice(S,a).replace(r,h);return u=u&&""!=u?"_s+='"+u+"';":"",S=a+n.length,g.push(u),p.push(t.T.trim(i)),n}),0===p.length)return e;for(var y,w,b=0,E=p.length;E>b;++b){if(y=p[b],w=g[b+1],-1!==y.search(/^\s*={2}/))y=y.replace(s,""),y="if(!!"+y+"){ _s+=(SYST.T.escapeHtml("+y+')); }else{ _s+=""; }';else if(/^=[^=]+?/i.test(y))y=y.replace(s,""),y="if(!!"+y+"){ _s+=("+y+');}else{_s+="";}';else if(d.test(y)){var V;y.replace(d,function(e,n,i){n&&""!==n&&(V=setInterval(function(){t.$(i)[0]&&(clearInterval(V),t.$(i).load(n))},1e3/60))}),y=""}_+=(y||"")+(w||"")}return _=""+_+" }; return _s;",m=new Function("$d",_),c[i]=m,m.call(f||this,o)},m=function(e,n,r,o,s){if(!e)throw new SyntaxError("no found template content");var a,u,l,h="";if(i=e,c[i])return l=c[i],l.call(s||this,n);if(p(o),-1!==e.search(/[<|>|\/]/i))h=t.T.trim(e);else if(t.V.isString(e)?(u=e.replace(/^#/i,""),a=document.getElementById(u)):t.V.isElement(e)&&(a=e),a){var f=/^(TEXTEREA|INPUT)$/i.test(a.nodeName)?a.value:a.innerHTML;h=t.T.trim(f)}return g(h,n,r,s)};t.Render=m,t.T.render=m}(SYST),function(t){"use strict";function e(t,e,o,s,a,u){if(!o)throw new ReferenceError("没有添加事件名称");var a=a||"on";t||(t=window),i(t.selector)?"on"==a?$(window).off().on(o,r(e,s)):$(window).off(o,r(e,s)):n(t.selector)?"on"==a?$(t.selector).off().on(o,r(e,s)):$(t.selector).off(o,r(e,s)):"on"==a?$(u||"body").undelegate(t.selector,o,r(e,s)).delegate(t.selector,o,r(e,s)):$(u||"body").undelegate(t.selector,o)}function n(t){return t==document||"document"==t||"html"==t||"body"==t}function i(t){return t==window||"window"==t}var r=t.T.hoadEvent,o=function(t,n,i,r,o,s){e(t,n,i,r,o,s)};o.initEvent=function(t,n,i,r,o,s){e(t,n,i,r,o,s)},o.uninitEvent=function(t,e,r,o){i(t)?$(window).off(e,r):n(t)?$(t).off(e,r):$(o).undelegate(t,e,r)},t.Events=o}(SYST),!function(t){var e=t.$||$,n=/\{\{\s*([^\{]*?)\s*\}\}/gi,i=Array.prototype.slice,r=("observe"in Object,/^[^\w]*/gi),o={toUpperCase:function(t){return t.toUpperCase()},toLowerCase:function(t){return t.toLowerCase()}};trimAttrValue=function(e){return t.T.rtrim(e.replace(/[\s\{\}]*/gi,""),"|")};var s="st-model",a="st-prop",u="st-template",c="st-style",l="st-repeat",h="st-item",f="st-vid",p="st-filter",d="bindStPropName",g="rawHtml",m="innerHTML",_="\\{\\{\\s*",v="\\s*\\}\\}",S="gi",T=new RegExp(_+"(\\$value)?"+v,S),y=new RegExp(_+"(\\$index)?"+v,S),w=new RegExp(_+"(\\$first)?"+v,S),b=new RegExp(_+"(\\$last)?"+v,S),E=new RegExp(_+"(\\$key[^\\}]*?)?"+v,S),V=new RegExp(_+"(\\$valu?e?[^\\}]*?)?"+v,S),j=function(t){if(!t)throw new ReferenceError("args 1 can ben SYST.Model");this._reset(t)};j.prototype={init:function(){this._init()},addListener:function(t,e){this._getModelTags(t),e&&this.model.set(t,e)},removeListener:function(t){return t?(this._deleteBinds(t),this):this.removeListenerAll()},removeListenerAll:function(){return this._reset(),this},update:function(e,n){!t.V.isEmpty(e)&&t.V.isString(e)&&(n&&(this.model.props[e]=n),this.bindElements[e]&&this.updateBindProps(e),this.bindStyles[e]&&this.updateBindStyles(e),this.bindRepeats[e]&&this.updateBindRepeats(e))},reset:function(t){this._reset(t),this._getBindModelTags()},updateBindProps:function(t){this._makeProps(t)},updateRenderTemplate:function(e,n){function i(e,i){t.V.isArray(i)&&t.T.each(i,function(t){o._renderTemplate(e,t,n)})}var r,o=this,s=this.bindTemplates;if(e)r=s[e],i(e,r);else for(var a in s)r=s[a],i(a,r)},updateBindStyles:function(t){this._makeStyles(t)},updateBindRepeats:function(t){this._makeRepeats(t)},_init:function(){return this.model.props?void this._getBindModelTags():this},_reset:function(t){this.model=t||this.model,this.bindModelTags=[],this.bindElements={},this.bindTemplates={},this.bindStyles={},this.bindRepeats={}},_deleteBinds:function(e){var n=[this.bindElements,this.bindTemplates,this.bindRepeats,this.bindStyles];!function(n){t.T.each(n,function(t){t[e]=null,delete t[e]})}(n)},_getModelTags:function(n){var r,o,a=this;a.bindModelTags=i.call(e("["+s+"="+this.model.$mid+"]")),t.T.each(a.bindModelTags,function(t){r=t.getAttribute(s),o=e(t),a._getBindElements(o,n),a._getBindTemplates(o,n),a._getBindStyles(o,n),a._getBindRepeats(o,n)})},_getBindModelTags:function(){this._getModelTags()},_getBindElements:function(t,e){this._getBindElementForAttriburte(t,e),this._getBindElementForContent(t,e),this._makeProps()},_getBindElementForAttriburte:function(e,n){var r,o,s,u=this;o=e,r=n?i.call(o.find("["+a+"="+n+"]")):i.call(o.find("["+a+"]")),0!==r.length&&t.T.each(r,function(t){s=u._getRootPropName(t.getAttribute(a)),u._toBindElements(s,t)})},_getBindElementForContent:function(e,r){for(var o,s,a,u=this,c=e;null!=(o=n.exec(c.html()));)if(s=i.call(c.find(":contains("+o[0]+")")).reverse(),s&&0!==s.length){if(a=u._getRootPropName(o[0]),r&&a!==r)break;t.T.each(s,function(t){t[g]=t[m],u._toBindElements(a,t)})}},_toBindElements:function(e,n){n[d]=e,t.V.isArray(this.bindElements[e])?-1===t.T.indexOf(this.bindElements[e],n)&&this.bindElements[e].push(n):(this.bindElements[e]=[],this.bindElements[e].push(n))},_makeProps:function(e){var n=this,i=this.bindElements;e&&!i[e]||t.T.each(i,function(e,i,r){var o=e||n.bindElements[r];o&&0!==o.length&&t.T.each(o,function(t){n._makeProp(r,t)})})},_makeProp:function(t,e){if(null!=this.model.props[t]){var i,r=this;if(i=e.getAttribute(a),/TEXTAREA|INPUT/.test(e.nodeName))e.value=r._getProp(e),/radio|checkbox/.test(e.type)?e.onclick=function(t){r.model.set(i,this.checked)}:e.onkeyup=function(t){r.model.set(i,this.value),e.value=r._getProp(e)};else if(/SELECT/.test(e.nodeName))e.value=r._getProp(e),e.onchange=function(t){var n=this.value,o=e.getAttribute(p);o&&(o=o.split("|")),o&&0!==o.length&&(n=r._makeFilters(n,o)),r.model.set(i,n),e.value=r._getProp(e)};else{if(e.getAttribute(l))return;i=e.getAttribute(a),i||!e[g]?e[m]=r._getProp(e):e[m]=e[g].replace(n,function(t,n){return r._getProp(e,n)})}}},_getProp:function(e,n){var i,o,s=n||function(){var t=e.getAttribute(a);return t?t.replace(r,""):null}();return s?(o=this._getFilters(s),s=this._getPropName(s),i=/\./gi.test(s)?this._getFinalPropValue(s):this.model.props[s],null==i?"":(t.V.isFunction(i)&&(i=i.apply(this.model)),i=this._makeFilters(i,o))):""},_getFinalPropValue:function(e){for(var n,i=e.split("."),o=0,s=this.model.props[i[0].replace(r,"")]||"";t.V.isObject(s)&&null!=(n=s[i[++o]]);)s=s[i[o]];return s},_getFilters:function(t){var e=trimAttrValue(t).split("|");return e.shift(),e},_makeFilters:function(e,n){var i,r=this,s=e;return t.T.each(n,function(e){i=r.model[t.T.trim(e)],t.V.isFunction(i)?s=i.apply(r.model,[s]):(i=o[e]||t.T[e],t.V.isFunction(i)&&(s=i(s)))}),s},_getRootPropName:function(t){return trimAttrValue(t).split(/\.|\|/gi)[0]},_getPropName:function(t){return trimAttrValue(t).split("|")[0]},_getBindTemplates:function(e,n){var i,r,o=this;i=this._getElements(n,e,u),0!==i.length&&t.T.each(i,function(t){r="#"+t.getAttribute(u),o._toBindTemplates(r,t),o._renderTemplate(r,t)})},_toBindTemplates:function(e,n){this.bindTemplates[e]||(this.bindTemplates[e]=[]),-1===t.T.indexOf(this.bindTemplates[e],n)&&this.bindTemplates[e].push(n)},_renderTemplate:function(n,i,r){i=e(i),r=t.V.isObject(r)?t.extend(this.model.props,r):this.model.props;var o="";t.V.isObject(r)&&(o=t.T.render(n,r,null,{open:"{{",close:"}}"})),i.html(o)},_getBindStyles:function(e,i){var r,o,s,a=this;s=this._getElements(i,e,c),0!==s.length&&(t.T.each(s,function(t){for(r=t.getAttribute(c);null!=(o=n.exec(r));){t[c]=r,t.removeAttribute(c);var e=a._getPropName(o[1]);a._toBindStyles(e,t)}}),this._makeStyles(i))},_toBindStyles:function(e,n){var i=this.bindStyles[e];i||(i=this.bindStyles[e]=[]),-1===t.T.indexOf(i,n)&&i.push(n)},_makeStyles:function(e){var n=this,i={};e?i[e]=this.bindStyles[e]:i=this.bindStyles,t.T.each(i,function(t,e,i){n._makeStyle(i,t)})},_makeStyle:function(e,i){if(e in this.model.props){var r,o=this,i=i||this.bindStyles[e];t.V.isArray(i)&&t.T.each(i,function(t){r=t[c],r=r.replace(n,function(t,e){if(/\|/gi.test(e)){var n=o._getPropName(e),i=o.model.props[n];return o._makeFilters(i,o._getFilters(e))}return o.model.props[e]});var e=t.style.cssText;e=0===e.length?"":e.replace(/;$/i,"")+";",t.style.cssText=e+r})}},_getBindRepeats:function(e,n){var i,r,o,s=this;o=this._getElements(n,e,l),0!==o.length&&(t.T.each(o,function(t){i=t.getAttribute(l),r=t.outerHTML,t.rawOuterHTML=r,t.parent=t.parentNode,s._toBindRepeats(i,t)}),this._makeRepeats())},_toBindRepeats:function(e,n){var i=this.bindRepeats[e];i||(this.bindRepeats[e]=[],i=this.bindRepeats[e]),-1===t.T.indexOf(i,n)&&i.push(n)},_makeRepeats:function(e){var n=this,i={};e?i[e]=this.bindRepeats[e]:i=this.bindRepeats,t.T.each(i,function(t,e,i){n._makeRepeat(i,t)})},_makeRepeat:function(e,n){if(e in this.model.props&&n&&0!==n.length){var r,o,s=this,a=(n.length,""),u=s.model.get(e);t.T.each(n,function(e){if(r=s._removeBindAttr(e),o=e.getAttribute(h),t.V.isEmpty(o)||(T=new RegExp(_+"(\\$?"+o+"[^\\{]*?)"+v,S)),t.V.isArray(u))for(var n=0,c=u.length;c>n;++n)a+=s._replaceBindsArray(r,u[n],n,c-1,o);else t.V.isObject(u)&&t.T.each(u,function(t,e,n){a+=s._replaceBindObject(r,n,t,e)});var l=i.call($(e.parent).find("["+f+"]"));l[0]?(e.newFirstChild=l[0],l.shift(),t.T.each(l,function(t){$(t).remove()}),$(e.newFirstChild).replaceWith(a)):$(e).replaceWith(a)})}},_removeBindAttr:function(t){var e=$(t.rawOuterHTML);return e.removeAttr(l).removeAttr(h).attr(f,Date.now()),e=e[0].outerHTML},_replaceBindsArray:function(e,i,r,o,s){var a,u,c=this,l={},h={open:"{{",close:"}}"};return e.replace(T,function(t,e){a=c._getFilters(e),u=c._makeFilters(i,a)}),t.V.isObject(u)?(e=e.replace(/\{\{/gi,"{{="),l={$index:""+r,$first:0===r?"true":"false",$last:r===o?"true":"false"},l[s]=i,e=t.T.render(e,l,null,h)):e=e.replace(T,function(){return u}).replace(y,function(){return r}).replace(w,function(){return 0===r}).replace(b,function(){return r===o}).replace(n,function(t,e){return c.model.has(e)?c.model.get(e):t}),e},_replaceBindObject:function(t,e,n,i){function r(t,e){var n=o._getFilters(e);return o._makeFilters(t,n)}var o=this;return t=t.replace(E,function(t,n){return r(e,n)}).replace(V,function(t,e){return r(n,e)}).replace(y,function(){return""+i})},_getElements:function(t,e,n){var r;return r=t?i.call(e.find("["+n+"="+t+"]")):i.call(e.find("["+n+"]"))}},t.Watcher=j}(SYST),function(t,e){"use strict";var n=(t.$,"observe"in Object,function(){this.__instance_SYST__="SYST Model",this.__name__="SYST Model",this.autoWatcher=!0,this.props={},this.watcher=null,this._watchers={},this.states={}});t.Model=function(){var e=t.extendClass(arguments,n);return e._initialize(),e},n.prototype={$http:t.Http(),_initialize:function(){this.watcher=new t.Watcher(this),t.shareModel.add(this.$mid||null,this),this.init&&this.init.apply(this,arguments),(this.$mid||this.autoWatcher!==!1)&&this.watcher.init()},generateApi:function(e,n,i){var r=this;if(t.V.isArray(e)&&t.T.each(e,function(t,e){r._generateApi(t,n[t],i)}),t.V.isObject(e))for(var o in e)this._generateApi(o,e[o],i)},_generateApi:function(e,n,i){function r(t,e,r){o.$http.doAjax(n,t,e,r,i)}var o=this;i=t.V.isObject(i)&&i||{},i.callTarget=this,"defineProperty"in Object?Object.defineProperty(o,e,{value:r}):o[e]=r},get:function(t){return this.props[t]},set:function(e,n){function i(t,e){r.props[t]=e,r._watchProrp(t,e)}if(t.V.isEmpty(e))return this;var r=this;if(t.V.isObject(e))for(var o in e)i(o,e[o]);else t.V.isString(e)&&e.length>0&&i(e,n);return r._watchTemplate(),this},add:function(t,e){this.set(t,e)},has:function(t){return Boolean(this.props[t])},removeProps:function(e){var n=this;return t.V.isString(e)?this.remove(e):t.V.isArray(e)?t.T.each(e,function(t){n.remove(t)}):t.V.isObject(e)?t.T.each(e,function(t,e,i){n.remove(i)}):(this.watcher.removeListener(),this.props={}),this},removePropsAll:function(){this.removeProps()},remove:function(t){return t&&""!=t?(this.props[t]=null,delete this.props[t],this.watcher.removeListener(t),this):this},getItem:function(t,n){var i=(n?e.sessionStorage:e.localStorage).getItem(t);try{i=JSON.parse(i)}catch(r){}return i},setItem:function(n,i,r){function o(n,i){(t.V.isObject(i)||t.V.isArray(i))&&(i=JSON.stringify(i)),(r?e.sessionStorage:e.localStorage).setItem(n,i)}if(t.V.isObject(n))for(var s in n)o(s,n[s]);else{if(!("string"==typeof n&&n.length>0))return this;o(n,i)}},hasItem:function(t,n){return Boolean((n?e.sessionStorage:e.localStorage).getItem(t))},removeItem:function(t,n){(n?e.sessionStorage:e.localStorage).removeItem(t)},removeItems:function(e,n){var i=this;t.V.isString(e)?i.removeItem(e,n):t.V.isArray(e)?t.T.each(e,function(t){i.removeItem(t,n)}):n?sessionStorage.clear():localStorage.clear()},_watchProrp:function(t,e){this.watcher&&this.watcher.update(t)},_watchTemplate:function(){this.watcher&&this.watcher.updateRenderTemplate()}}}(SYST,window),function(t){"use strict";t.shareModel={models:{},add:function(e,n){t.V.isEmpty(e)&&(e=(new Date).getTime()+Math.random()),this.models[e]=n},get:function(t){var e=this.models;return e[t]?e[t]:null},remove:function(t){var e=this.models,n=e[t];return n&&(e[t]=null,delete e[t]),n},has:function(t){return!!this.models[t]}}}(SYST),function(t,e){"use strict";var n=function(){this.__instance_SYST__="SYST View",this.__Name__="SYST View",this.container="body",this.template=null};t.View=function(){var e=t.extendClass(arguments,n);return e._initialize(),e},n.prototype={_initialize:function(){this.container=t.$(this.container),this.containerSelector=this.container.selector,!this.unInit&&this.init&&this.init.apply(this),this.events&&this.events!={}&&t.V.isObject(this.events)&&this.onEvent()},destroy:function(){return this.container.html(""),this},handEvent:function(t,e){for(var n=this,i=[],r=2;r<arguments.length;r++)i.push(arguments[r]);return function(r){i.push(e),i.push(r),t.apply(n,i)}},hoadEvent:t.T.hoadEvent,_parseEvent:function(e){function n(t,e,n){u.push(t),a.push(e),c.push(n)}if(!e||0==e.length||e==={})return this;var i,r,o,s,a=[],u=[],c=[];for(var l in e){var h=e[l];if(t.V.isObject(h))for(var f in h)i=this._parseString(h,f),r=i[0],o=i[1],s=i[2],n(r,o,s);else i=this._parseString(e,l),r=i[0],o=i[1],s=i[2],n(r,o,s)}return{events:a,elements:u,functions:c}},_autoHandleEvent:function(e){var n=this._parseEvent(this.events),i=n.events,r=n.elements,o=n.functions;if(!i||0==i.length||i.length=={})return this;for(var e=e||"on",s=0,a=i.length;a>s;s++){if(!i[s])throw new Error("对象侦听"+i[s]+"不存在");if(!o[s])throw new Error("对象"+this+"不存在"+o[s]+"方法");if(!r[s])throw new Error("事件函数"+o[s]+"不存在");t.Events($(r[s]),this,i[s],o[s],e,this.containerSelector)}return this},_parseString:function(t,e){var n=$.trim(e).split(/\s+/gi),i=n[1].replace(/^\$*|[\(*]|[\)*]$/gi,"").replace(/"|'/gi,'"'),r=n[0].replace(/^\s*|\s*$/gi,""),o=t[e];return[i,r,o]},onEvent:function(e,n,i){return t.V.isEmpty(e)?this._autoHandleEvent("on"):t.Events.initEvent(t.V.isString(e)?$(e):e,this,n,i,"on",this.containerSelector),this},offEvent:function(e,n,i){return t.V.isEmpty(e)?this._autoHandleEvent("off"):t.Events.initEvent(t.V.isString(e)?$(e):e,this,n,i,"off",this.containerSelector),this},model:new t.Model,shareModel:t.shareModels}}(SYST,window),function(t){"use strict";var e=function(){this.__instance_SYST__="SYST Controller",this.__Name__="SYST Controller"};t.Controller=function(){var n=t.extendClass(arguments,e);return n._initialize(),n},t.Controller.prototype={defaultHost:location.host,shareModel:t.shareModel,_initialize:function(){t.V.isFunction(this.init)&&this.init.apply(this,arguments)},getModel:function(t){return t?this.shareModel.get(t):this.model},setModel:function(e){if(t.V.isEmpty(e))throw new Error("setModel: 参数有误");this.shareModel.add(e),this.model=e}}}(SYST),function(t){"use strict";var e=window.location,n=e.host,i=(e.port,e.origin||e.protocol+"//"+n,e.pathname,e.hash),r=("pushState"in history,"replaceState"in history,/\((.*?)\)/g),o=/(\(\?)?:\w+/g,s=/\*\w+/g,a=/[\-{}\[\]+?.,\\\^$|#\s]/g,u=function(){},c=function(t){return t.replace(/[#!]/gi,"").split("?")[0]},l=function(){this.__instance_SYST__="SYST Router",this.__Name__="SYST Router"};t.Router=function(){var e=t.extendClass(arguments,l);return e._initialize(),e},t.R=l.prototype={_cache:{},_stateCache:[],routes:null,container:"body",router:null,params:null,isRender:!1,_initialize:function(){if(t.V.isObject(this.routes)&&this.routes!={}){var e=this.routes;for(var n in e)this._initRouters(n,e[n]);this.start()}},_initRouters:function(e,n){t.V.isString(n)&&this[n]&&(n=this[n]),this._cache[e]=n},start:function(){var t=this.redirectTo;if(i&&""!==i){var e=c(i);this["switch"](e)}else t&&this._updateHash(t);return this._changeStart(),this},stop:function(){this._changeStop()},when:function(e,n){return t.V.isEmpty(e)?void 0:(t.V.isObject(n)?this._cache[e]=n:t.V.isFunction(n)&&(this._cache[e]=n.apply(this)),this)},"switch":function(e,n){if(this._cache&&{}!==this._cache){var i=this._getRouter(e);i.router;return this.params=t.T.params(null,window.location.href),this._exec(e),this}},renderBefore:u,rendering:u,rendered:u,getRouter:function(t){return this._getRouter(t)},_getRouter:function(e){if(this._cache&&this._cache!=={}){var n,i,r,o;for(r in this._cache)if(o=this._routeToRegExp(r),o.test(e)){i=r,n=this._cache[r];break}return n=t.V.isObject(n)?n:t.V.isFunction(n)?n.apply(this):null,{routeKey:i,router:n}}},_routeToRegExp:function(t){return t=t.replace(a,"\\$&").replace(r,"(?:$1)?").replace(o,function(t,e){return e?t:"([^/?]+)"}).replace(s,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,n,i){var r=e.exec(i).slice(1),o=e.exec(n).slice(1),s=[],a={};if(t.V.isArray(r)&&r.length>0)for(var u=0,c=r.length;c>u;++u){var l=r[u];s.push(l?decodeURIComponent(l):null)}if(t.V.isArray(o)&&o.length>0)for(var h=0,c=o.length;c>h;++h){var f=o[h];f&&(a[f.replace(/^[^\w]|[^\w]$/i,"")]=s[h])}return{paramsObject:a,params:s}},_exec:function(n){var i=this._getRouter(n),r=i.router,o=i.routeKey;this.router=r,this.router.route=o,t.V.isRegExp(o)||(n=this._routeToRegExp(o));var s=c(e.hash),a=this._extractParameters(n,o,s),u=a.paramsObject;a.params;this.params=t.extend(this.params,u),this.router.params=this.params,this._onReady(),this._execRouter()},_execRouter:function(){var t=this,e=this.router;if(e){var n=e.container||this.container||"body";e.template?this._template(e.template,n,function(e){t._execMAction(e),t._onRender()}):t._execMAction()}},_execMAction:function(e){this.tpl=e,this.router.tpl=e;var n=this.router,i=n.view,r=n.action;r&&t.V.isFunction(r)&&r.call(this,i,this.params,e)},_changeStart:function(){this._changeStop(),window.addEventListener("hashchange",t.hoadEvent(this,"_changeHandler"),!1)},_changeStop:function(){window.removeEventListener("hashchange",t.hoadEvent(this,"_changeHandler"),!1);
},_changeHandler:function(t){var e,n=this;this.router;this.oldURL="#"+t.oldURL.split("#")[1],this.newURL="#"+t.newURL.split("#")[1];var i=c(this.newURL);i&&(e=this._getRouter(i)),e&&e.router&&this._onDestroy(function(){n.router=e,n["switch"](i)})},_template:function(e,n,i){function r(e){t.V.isFunction(o.rendered)&&o.rendered.apply(o),i&&t.V.isFunction(i)&&i.call(o,e)}var o=this;this.container=t.$(n),t.V.isFunction(o.renderBefore)&&o.renderBefore.apply(o);var s=/^(load[\@|\!|\#|\>])+?/gi;s.test(e)?(e=e.replace(s,""),this.container.load(e,function(t){r(t)},function(t){throw new Error("load template is failed!")})):r(e)},_onReady:function(){var e,n=this.router;n&&t.V.isFunction(n.onReady)&&n.onReady.call(this),e=n.view,e&&(e.router=n,e.init&&e.init(n),e.offEvent().onEvent())},_onRender:function(){var e=this.router,n=this.tpl;(e.data||e.isRender||this.isRender)&&(n=t.T.render(n,e.data)),this.container.html(n),this.tpl=n,this.router.tpl=n,t.V.isFunction(e.onRender)&&e.onRender.call(this,n)},_onDestroy:function(e){var n,i,r,o,s=this.router;if(t.V.isObject(s))if(i=s.onDestroy,r=s.route,o=s._destroyState,n=s.view,n&&(s.view=null,delete s.view,n.offEvent()),t.V.isFunction(i)){var a=i.apply(this);a!==!1?(s._destroyState=!0,t.V.isFunction(e)&&e.apply(this)):(s._destroyState=!1,this._updateHash(r))}else t.V.isFunction(e)&&e.apply(this);else t.V.isFunction(e)&&e.apply(this)},_updateHash:function(t){window.location.hash="#!"+t.replace(/^#!/i,"")},_onAnimate:function(t,e){var n=this.router;if(n){var i=n.animate,r=n.animateDuration||300,o=this.container,t=t||"on";if(n&&o)switch(i){case"slide":"on"===t?o.slideDown(r,e):o.slideUp(100,e);break;case"fade":"on"===t?o.fadeIn(r,e):o.fadeOut(100,e);break;default:o.show()}}}}}(SYST),function(t){"use strict";var e=navigator.userAgent.toUpperCase(),n=-1!==e.indexOf("ANDROID"),i=-1!==e.indexOf("IPHONE OS"),r=!(!n&&!i),o=-1!==e.indexOf("MOBILE"),s=-1!==e.indexOf("IPAD"),a=!(!o&&!s),u=function(){this.__instance_SYST__="SYST Native",this.__Name__="SYST Native"};t.Native=function(){return t.extendClass(arguments,u)},t.N=u.prototype={isAndroid:n,isIos:i,isNative:r,isPhone:o,isPad:s,isMobile:a,callNative:function(t){}}}(SYST);