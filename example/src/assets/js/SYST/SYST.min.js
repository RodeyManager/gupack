(function(t){"use strict";var e={};e.VERSION="2.0.42",e.AUTHOR="Rodey Luo";try{e.$=t.jQuery||t.Zepto||void 0}catch(n){throw new Error("$不存在，请先引入jQuery|Zepto插件，依赖其中一个"+n)}var i=function(t){var e,n=t,i={};for(e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i},r=function(t,e){if(!t)return e;if(!e)return t;var n=i(t);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n},s=function(t,n){var i,t=Array.prototype.slice.call(t),s=t[0],o=0,a={};if(e.V.isObject(s)){if("__instance_SYST__"in s){for(t.shift(),i=t.length;i>o;++o)a=r(a,t[o]);return a.__proto__=s,a}for(i=t.length;i>o;++o)a=r(a,t[o]);return a.__proto__=new n,a}return a.__proto__=new n};return e.extend=r,e.extendClass=s,e.clone=i,!1 in Object&&(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}),"object"==typeof module&&"object"==typeof module.exports?module.exports=e:t.SYST=e,e}).call(this,window),function(t){"use strict";var e=function(){this.__instance_SYST__="SYST Validate",this.__Name__="Validate"};t.Validate=function(){return t.extendClass(arguments,e)},t.V=e.prototype={isEmpty:function(t){return!t||0===t.length||null==t},isCN:function(t,e){return e?/^[\u4e00-\u9fa5]+$/.test(t):/[\u4e00-\u9fa5]+/gi.test(t)},isEmail:function(t){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/gi.test(t)},isURL:function(t){return/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/i.test(t)},isTel:function(t){return/^(\(\d{3,4}\)|\d{3,4}-)?\d{7,8}$/gi.test(t)},isMobile:function(t){return/^1[3|4|5|7|8]{1}\d{9}$/.test(t)},isZip:function(t){return/^\d{6}$/.test(t)},isDateLocal:function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})$/.test(t)},isDateTime:function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},isTime:function(t){return/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},isNull:function(t){return null==t},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:function(t){return"[object Array]"===toString.call(t)},isDate:function(t){return"[object Date]"===toString.call(t)},isObject:function(t){return"[object Object]"===toString.call(t)},isFunction:function(t){return"function"==typeof t},isFile:function(t){return"[object File]"===toString.call(t)},isBlob:function(t){return"[object Blob]"===toString.call(t)},isBoolean:function(t){return"boolean"==typeof t},isdefined:function(t){return"undefined"!=typeof t},isRegExp:function(t){return"[object RegExp]"===toString.call(t)},isWindow:function(t){return t&&t.document&&t.location&&t.alert&&t.setInterval},isElement:function(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}}}(SYST),function(t){"use strict";var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=function(){this.__instance_SYST__="SYST Tools",this.__Name__="Tools"};t.Tools=function(){return t.extendClass(arguments,n)},t.T=n.prototype={trigger:function(e,n,i,r){var s;if(e&&n&&""!==n){n=-1!==n.search(/^(on)/i)?n:"on"+n,s=function(n){t.V.isFunction(r)&&r.call(e,n,i)};try{e[n]=s}catch(o){throw new Error(e+"不存在"+n+"方法 <::>")}}},hoadEvent:function(t,e){var n=[];t=t||window;for(var i=2;i<arguments.length;i++)n.push(arguments[i]);return function(i){if(i&&"object"==typeof i&&(i.preventDefault(),i.stopPropagation()),n.push(i),!t[e])throw new Error(e+" 函数未定义！");t[e].call(t,i,n)}},trim:function(e){return t.V.isString(e)?e.replace(/^\s*|\s*$/gi,""):""},rtrim:function(e,n,i){if(!t.V.isString(e))return"";if(n){var r;return r=i?new RegExp("\\"+n+"*","gi"):new RegExp("^(\\"+n+")*|(\\"+n+")*$","gi"),e.replace(r,"")}return this.trim(e)},indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1},arrRemove:function(t,e){var n=this.indexOf(t,e);return n>=0&&t.splice(n,1),t},toFirstUpperCase:function(t){return t.replace(/^(\w)?/i,function(t,e){return e.toUpperCase()})},F2C:function(t){for(var e="",t=t.replace(/\s*/gi,""),n=0;n<t.length;n++){var i=t.charCodeAt(n);e+=12288!=i?i>65280&&65375>i?String.fromCharCode(i-65248):String.fromCharCode(i):String.fromCharCode(32)}return e=e.replace(/\s*/gi,""),e.toUpperCase()},escapeHtml:function(t){return t.replace(/&(?![\w#]+;)|[<>"']/gi,function(t){return e[t]})},dateFm:function(t){return 10>t?"0"+t:t},setDateFormat:function(e,n,i){function r(t,e){e.push(i?s.dateFm(t):t)}if(!e)return"";var s=this,o=new Date(parseInt(e,10)),a=[],u=[];if(!n)return o.getFullYear()+"-"+this.dateFm(o.getMonth()+1)+"-"+this.dateFm(o.getDate())+" "+this.dateFm(o.getHours())+":"+this.dateFm(o.getMinutes())+":"+this.dateFm(o.getSeconds());var c=n.match(/[^\w\d\s]+?/i),l=c[0]||"-",h=c[1]||":",f=n.split(l)[0];return f=f.length<=2?(""+o.getFullYear()).substr(2):o.getFullYear(),r(f,a),/m+?/i.test(n)&&r(o.getMonth()+1,a),/d+?/i.test(n)&&r(o.getDate(),a),/h+?/i.test(n)&&r(o.getHours(),u),/i+?/i.test(n)&&r(o.getMinutes(),u),/s+?/i.test(n)&&r(o.getSeconds(),u),t.T.trim(a.join(l)+(u.length>0?" "+u.join(h):""))},setDateFormatCN:function(t,e,n){function i(t,e){return t.replace(e,function(){return u[c++]})}var r=/[-:\/\|_\.]/gi.test(t)?t:this.setDateFormat(t,e,n),s=r.split(" "),o=s[0],a=s[1],u=["年","月","日","时","分","秒"],c=0;return o=i(o,/[-\/\|_\.]/gi)+u[2],c++,a=i(a,/:/gi)+u[5],o+" "+a},getDateDiff:function(t,e){var n=Date.parse(e)-Date.parse(t),i=Math.floor(n/864e5),r=n%864e5,s=Math.floor(r/36e5),o=r%36e5,a=Math.floor(o/6e4),u=o%6e4,c=Math.round(u/1e3);return{days:i,hours:s,minutes:a,seconds:c}},randomChar:function(t,e){for(var n,i=48,r=122,s=0,o=t,a="",e=!0,u=[58,59,60,61,62,63,64,91,92,93,94,95,96],c=[48,49,73,76,79,108,111];o>s;++s)n=Math.floor(Math.random()*i+Math.random()*r),n>=i&&r>=n&&-1===u.indexOf(n)?e===!0?-1===c.indexOf(n)?a+=String.fromCharCode(10,n):o++:a+=String.fromCharCode(10,n):o++;return a.replace(/[\n\t\r]*/gi,"")},params:function(e,n){var i="?";if(this._pars&&this._pars[e])return this._pars[e];var r="";if(r=t.V.isEmpty(n)?location.href.split(i)[1]:/\?+/i.test(n)?n.split(i)[1]||"":n,t.V.isEmpty(r))return{};var s=r.replace(/^\?/,"").split("&");if(!s||[]===s)return{};for(var o=0,a=s.length,u={};a>o;++o){var c=s[o].split("=");c[0]&&""!==c[0]&&(u[c[0]]=decodeURI(c[1])||null)}return this._pars=u,e?decodeURI(u[e]):u},getParams:function(e,n){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r="";return r=t.V.isEmpty(n)?window.location.search.substr(1).match(i):(n.split("?")[1]||"").match(i),r?decodeURI(r[2]):null},paramData:function(e,n){if(t.V.isEmpty(e)||!t.V.isObject(e))return"";var i=e,r="";for(var s in i)r+="&"+s+"="+encodeURI(i[s]);return r=r.substr(1),n===!0?"?"+r:r},serialize:function(t,e){return this.paramData(t,e)},unserialize:function(t){return this.params(null,t)},jumpTo:function(e,n){var e=e||"#";t.V.isString(n)?e=e+"?"+n:t.V.isObject(n)&&(e+=t.T.paramData(n,!0)),location.href=e},redirect:function(t,e){this.jumpTo(t,e)},displace:function(t){if(t){for(var e=0,n=[],i=/\%[s|d|f]?/gi,r=1,s=arguments.length;s>r;++r)n.push(arguments[r]);var o=t.replace(i,function(t){return n[e++]});return o}},Cookie:function(t,e,n){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(e))||null===e||void 0===e)){if(n=n||{},null!==e&&void 0!==e||(n.expires=-1),"number"==typeof n.expires){var i=n.expires,r=n.expires=new Date;r.setDate(r.getDate()+i)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",n.raw?e:encodeURIComponent(e),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=e||{};for(var s,o=n.raw?function(t){return t}:decodeURIComponent,a=document.cookie.split("; "),u=0;s=a[u]&&a[u].split("=");u++)if(o(s[0])===t)return o(s[1]||"");return null},_Cookies:function(e,n){var i=this;if(e)if(t.V.isObject(e))t.T.each(Object.keys(e),function(t){i.Cookie(t,e[t],n)});else if(t.V.isArray(e)){for(var r,s={},o=0,a=e.length;a>o;++o)r=e[o],s[r]=i.getCookie(r);return s}},getCookie:function(e){return t.V.isString(e)?this.Cookie(e):this._Cookies(e)},setCookie:function(e,n,i){return t.V.isString(e)?this.Cookie(e,n,i):this._Cookies(e,i)},each:function(e,n,i){if(t.V.isObject(e)){var r=0;for(var s in e)e.hasOwnProperty(s)&&n.call(i||e,e[s],r++,s)}else{if(!t.V.isArray(e))throw new SyntaxError("args1 is must Object or Array");for(var o=0,a=e.length;a>o;++o)n.call(i||e,e[o],o)}}}}(SYST),function(t){"use strict";var e=1,n=2,i=3,r=t.Promise=function(t,n){this.STATE=e,this._fulfils=[],this._rejecteds=[],this.args=[],this.errs=[],this.data=null,this._bunchFulfil=!1,this._bunchReject=!1,this.then(t,n)};t.Promise.prototype={then:function(r,s){return this.STATE===e?(t.V.isFunction(r)&&this._fulfils.push(r),t.V.isFunction(s)&&this._rejecteds.push(s)):this.STATE===n?this.resolve():this.STATE===i&&this.reject(),this},done:function(t){return this.then(t)},success:function(t){return this.then(t)},"catch":function(t){return this.then(null,t)},error:function(t){return this.then(null,t)},resolve:function(t,e){this.STATE=n,t&&(this.data=t,this.args.push(t)),this._bunchFulfil=e!==!1?this._bunchFulfil:e;var i=this._fulfils.shift();if(!i||"function"!=typeof i)throw new TypeError("no found a function object to [then|all|done|success]");this._bunchFulfil?this._fulfils.push(i):(this._bunchFulfil=!1,i.call(this,t,this.args))},reject:function(t,e){this.STATE=i,t&&this.errs.push(t),this._bunchReject=e!==!1?this._bunchReject:e;var n=this._rejecteds.shift();if(!n||"function"!=typeof n)throw new TypeError("no found a function object to [then|catch|error]");this._bunchReject?this._rejecteds.push(n):(this._bunchReject=!1,n.apply(this,this.errs))},all:function(e){if(!t.V.isArray(e))throw new TypeError("args me be a array, queue element is be function");return this._bunchFulfil=!0,this._bunchReject=!0,t.T.each(e,function(e){t.V.isFunction(e)&&e()}),this}},t.P=t.Promise=r}(SYST),function(t){"use strict";var e=t.$;if(!e)throw new Error("doRequest: $不存在，此方法依赖于(jQuery||Zepto||Ender)");t.httpConfig={};var n=function(){this.__instance_SYST__="SYST Http",this.__name__="SYST Http"};t.Http=function(){return t.extendClass(arguments,n)},n.prototype={load:function(t,n,i,r){e(t).load(n,i,r)},ajax:e.ajax,get:e.get,getJSON:e.getJSON,getScript:e.getScript,post:e.post,doRequest:function(n,i,r,s,o){function a(){return t.V.isFunction(v)&&(_.beforeSend=v.apply(g)),_.beforeSend===!1?!1:void 0}function u(e,n,i,r){var s;return t.V.isFunction(S)&&(s=S.call(g,e,n,i,r)),s}function c(e,n,i){var r;return t.V.isFunction(y)&&(r=y.call(g,e,n,i)),r}function l(e,n,i,r){var s;return t.V.isFunction(b)&&(s=b.call(g,e,n,i,r)),s}function h(e,n,i,r){var s;return t.V.isFunction(w)&&(s=w.call(g,e,n,i,r)),s}var f,p,d,g,m=this,_={};if(i&&"object"==typeof i&&n&&""!=n){m._ajaxCount=0,this.ajaxUrl=n,p=m.ajaxDataType||t.httpConfig.ajaxDataType||"json";var v=m.ajaxBefore||t.httpConfig.ajaxBefore,S=m.ajaxSuccess||t.httpConfig.ajaxSuccess,y=m.ajaxError||t.httpConfig.ajaxError,b=m.ajaxComplete||t.httpConfig.ajaxComplete,w=m.ajaxEnd||t.httpConfig.ajaxEnd;if(t.V.isObject(o)&&(f=o.type||m.ajaxType||t.httpConfig.ajaxType||"POST",p=o.dataType||m.ajaxDataType||t.httpConfig.ajaxDataType||"json",d=o.commonData||m.commonData||t.httpConfig.commonData||{},_=o,g=o.callTarget||m),a()!==!1){var T=t.extend(_,{url:n,type:f,data:t.extend(i,d),dataType:p,success:function(e,n,i,s){h(e,n,i,s);var o=u(e,n,i,s);o!==!1&&t.V.isFunction(r)&&r.call(g,e,n,i,s)},error:function(e,n){var i=e.response;try{i=JSON.parse(i)}catch(r){}h(i,e,n);var o=c(i,e,n);o!==!1&&t.V.isFunction(s)&&s.call(g,i,e,n)},complete:function(t,e,n,i){l(t,e,n,i)}});e.ajax(T),m._ajaxCount++}}},doAjax:function(t,e,n,i,r){this.doRequest(t,e,n,i,r)},fetch:function(){return function(n,i,r){i=i||{};var s=(i.headers||{},(i.method||"post").toUpperCase()),o=i.body;if(!1 in window){var a=new t.Promise,u=$.extend(i,{url:n,data:o,type:s,dataType:r,success:function(t){a.resolve(t)},error:function(t){a.reject(t)}});return e.ajax(u),a}return"GET"==s||"HEAD"==s?(t.V.isObject(o)?n+=t.T.paramData(o,!0):t.V.isString(o)&&(n+="?"+o),i.body=null,delete i.body):t.V.isObject(o)&&(i.body=JSON.stringify(o)),window.fetch(n,i).then(function(e){return t.V.isFunction(e[r])&&e[r]()})}}(),socket:function(t,e){if(!1 in window)throw new ReferenceError("WebSocket api is not support!");return new WebSocket(t,e)}}}(SYST),function(t){"use strict";t.tplConfig={open:"<%",close:"%>"};var e,n,i,r=/\\|\'|\r|\n|\u2028|\u2029/g,s="([\\s\\S]+?)",o=/^=+\s*|\s*$/gi,a=t.tplConfig.open,u=t.tplConfig.close,c={},l={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},h=function(t){return"\\"+l[t]},f=function(t){var e=[];for(var n in t)e.push(t[n].source);return e.join("|").replace(/|$/i,"")},p=function(i){i=i||t.tplConfig,a=i.open||t.tplConfig.open,u=i.close||t.tplConfig.close,e={execter:new RegExp(a+s+u,"g"),exporter:new RegExp(a+"\\s*="+s+u,"g"),escaper:new RegExp(a+"\\s*=="+s+u,"g")},n=new RegExp(f(e),"g")},d=/^include\(\s*([^,]+?)\s*,\s*([^,]+?)\s*\)/i,g=function(e,s,l,f){var p=[],g=[],_='var _s=""; with($d || {}){ ',v="",S=0,s=s;if(l){if(t.V.isObject(l))for(var y in l)v+=l[y].toString()+";";else if(t.V.isFunction(l))v+=l.toString()+";";else{if(!t.V.isString(l)||!/function\(\)/gi.test(l))throw new EvalError("helper can be function");v+=l.replace(/;$/i,"")+";"}_=v+_}if(_="var each = SYST.T.each;"+_,e=[a,"if(true){",u,e,a,"}",u].join(""),e.replace(n,function(n,i,s,o,a){var u=e.slice(S,a).replace(r,h);return u=u&&""!=u?"_s+='"+u+"';":"",S=a+n.length,g.push(u),p.push(t.T.trim(i)),n}),0===p.length)return e;for(var b,w,T=0,E=p.length;E>T;++T){if(b=p[T],w=g[T+1],-1!==b.search(/^\s*={2}/))b=b.replace(o,""),b="if(!!"+b+"){ _s+=(SYST.T.escapeHtml("+b+')); }else{ _s+=""; }';else if(/^=[^=]+?/i.test(b))b=b.replace(o,""),b="if(!!"+b+"){ _s+=("+b+');}else{_s+="";}';else if(d.test(b)){var j;b.replace(d,function(e,n,i){n&&""!==n&&(j=setInterval(function(){t.$(i)[0]&&(clearInterval(j),t.$(i).load(n))},1e3/60))}),b=""}_+=(b||"")+(w||"")}return _=""+_+" }; return _s;",m=new Function("$d",_),c[i]=m,m.call(f||this,s)},m=function(e,n,r,s,o){if(!e)throw new SyntaxError("no found template content");var a,u,l,h="";if(i=e,c[i])return l=c[i],l.call(o||this,n);if(p(s),-1!==e.search(/[<|>|\/]/i))h=t.T.trim(e);else if(t.V.isString(e)?(u=e.replace(/^#/i,""),a=document.getElementById(u)):t.V.isElement(e)&&(a=e),a){var f=/^(TEXTEREA|INPUT)$/i.test(a.nodeName)?a.value:a.innerHTML;h=t.T.trim(f)}return g(h,n,r,o)};t.Render=m,t.T.render=m}(SYST),function(t){"use strict";function e(t,e,o,a,u,c){var u=u||"on";t||(t=window);for(var l=0;l<r.length;l++)r[l]===o&&(i(t.selector)?"on"==u?$(window).off().on(o,s(e,a)):$(window).off(o,s(e,a)):n(t.selector)?"on"==u?$(t.selector).off().on(o,s(e,a)):$(t.selector).off(o,s(e,a)):"on"==u?$(c||"body").undelegate(t.selector,o,s(e,a)).delegate(t.selector,o,s(e,a)):$(c||"body").undelegate(t.selector,o))}function n(t){return t==document||"document"==t||"html"==t||"body"==t}function i(t){return t==window||"window"==t}var r="abort reset click dblclick tap touchstart touchmove touchend change mouseover mouseout mouseup mousedown mousemove mousewheel drag dragend dragenter dragleave dragover dragstart drop resize scroll submit select keydown keyup keypress touchstart touchend load unload blur focus contextmenu formchange forminput input invalid afterprint beforeprint beforeonload haschange message offline online pagehide pageshow popstate redo storage undo canplay canplaythrough durationchange emptied ended loadeddata loadedmetadata loadstart pause play playing progress ratechange readystatechange seeked seeking stalled suspend timeupdate volumechange waiting cut copy paste".split(/\s+/gi),s=t.T.hoadEvent,o=function(t,n,i,r,s,o){e(t,n,i,r,s,o)};o.initEvent=function(t,n,i,r,s,o){e(t,n,i,r,s,o)},o.uninitEvent=function(t,e,r,s){i(t)?$(window).off(e,r):n(t)?$(t).off(e,r):$(s).undelegate(t,e,r)},t.Events=o}(SYST),!function(t){var e=/\{\{\s*([^\{]*?)\s*\}\}/gi,n=Array.prototype.slice,i="observe"in Object,r=/^[^\w]*/gi,s={toUpperCase:function(t){return t.toUpperCase()},toLowerCase:function(t){return t.toLowerCase()}};trimAttrValue=function(e){return t.T.rtrim(e.replace(/[\s\{\}]*/gi,""),"|")};var o="st-model",a="st-prop",u="st-template",c="st-style",l="st-repeat",h="st-item",f="st-vid",p="bindStPropName",d="rawHtml",g="innerHTML",m="\\{\\{\\s*",_="\\s*\\}\\}",v="gi",S=new RegExp(m+"(\\$value)?"+_,v),y=new RegExp(m+"(\\$index)?"+_,v),b=new RegExp(m+"(\\$first)?"+_,v),w=new RegExp(m+"(\\$last)?"+_,v),T=new RegExp(m+"(\\$key[^\\}]*?)?"+_,v),E=new RegExp(m+"(\\$valu?e?[^\\}]*?)?"+_,v),j=function(t){if(!t)throw new ReferenceError("args 1 can ben SYST.Model");this.model=t,this._reset(t)};j.prototype={init:function(){this._init()},addListener:function(e){for(var n,i,r=t.$("["+o+"]"),s=0,a=r.length;a>s;++s)n=r[s].getAttribute(o),n===this.model.$mid&&(i=t.$(r[s]),-1===t.T.indexOf(this.bindTags,i)&&this.bindTags.push(i),this._getBindElements(i,e),this._getBindTemplates(i,e),this._getBindStyles(i),this._getBindRepeats(i));this._setProps(this.bindElements[e])},removeListener:function(e){if(!e)return this._reset(),this;this._deleteBinds(e);for(var n,i=0,r=this.elements.length;r>i;++i)if(n=this.elements[i],n[p]===e)return t.T.arrRemove(this.elements,n),this;return this},removeListenerAll:function(){return this.removeListener()},update:function(e,n){var i=this.elements;!t.V.isEmpty(e)&&t.V.isString(e)&&(n&&(this.model.props[e]=n),i=this.bindElements[e]||i,this.updateBindStyles(e),this.updateBindRepeats(e)),this._setProps(i)},reset:function(t){this._reset(t),this._getBindModelTags(),this._setProps(this.elements)},updateRenderTemplate:function(e,n){function i(e,i){t.V.isArray(i)&&t.T.each(i,function(t){s._renderTemplate(e,t,n)})}var r,s=this,o=this.bindTemplates;if(e)r=o[e],i(e,r);else for(var a in o)r=o[a],i(a,r)},updateBindStyles:function(t,e){this._makeStyle(t,e)},updateBindRepeats:function(t,e){this._makeRepeats(t,e)},_init:function(){return this.model.props?(i&&this._initObserve(),this._getBindModelTags(),void this._setProps(this.elements)):this},_initObserve:function(){function t(t){switch(e=t.type,n=t.name,e){case"add":r.addListener(n);break;case"update":r.update(n);break;case"delete":r.removeListener(n)}r.updateRenderTemplate()}if(i){var e,n,r=this;Object.observe(this.model.props,function(e){e.forEach(function(e){t(e)})})}},_reset:function(t){this.model=t||this.model,this.elements=[],this.bindTags=[],this.bindElements={},this.bindTemplates={},this.bindStates=[],this.bindStyles={},this.bindRepeats={}},_deleteBinds:function(e){var n=[this.bindElements,this.bindTemplates,this.bindRepeats,this.bindStyles];!function(n){t.T.each(n,function(t){t[e]=null,delete t[e]})}(n)},_getBindModelTags:function(e){for(var n,i,r=t.$("["+o+"]"),s=0,a=r.length;a>s;++s)n=r[s].getAttribute(o),n===this.model.$mid&&(i=t.$(r[s]),-1===t.T.indexOf(this.bindTags,i)&&this.bindTags.push(i),this._getBindElements(i,e),this._getBindTemplates(i,e),this._getBindStyles(i),this._getBindRepeats(i))},_getBindElements:function(t){this._getBindElementForAttriburte(t),this._getBindElementForContent(t)},_getBindElementForAttriburte:function(t){var e,i,r,s=this;i=t,e=n.call(i.find("["+a+"]")),e.map(function(t){return r=s._getRootPropName(t.getAttribute(a)),t[p]=r,s._toBindElements(r,t),t}),this.elements=this.elements.concat(e)},_getBindElementForContent:function(i){var r,s,o,a,u=this;for(r=i,elements=[];null!=(s=e.exec(r.html()));)o=n.call(r.find(":contains("+s[0]+")")).reverse(),a=u._getRootPropName(s[0]),o&&0!==o.length&&t.T.each(o,function(t){u._isInBindElements(t,a)})},_isInBindElements:function(e,n){e[d]=e[g],e[p]=n,-1===t.T.indexOf(this.elements,e)&&this.elements.push(e),this._toBindElements(n,e)},_toBindElements:function(e,n){t.V.isArray(this.bindElements[e])?-1===t.T.indexOf(this.bindElements[e],n)&&this.bindElements[e].push(n):(this.bindElements[e]=[],this.bindElements[e].push(n))},_setProps:function(t){var e=this,t=t||this.bindElements,n=0,i=t.length;if(t&&0!==t.length)for(;i>n;++n)e._setProp(t[n])},_setProp:function(t){var n,i=this;if(n=t.getAttribute(a),/TEXTAREA|INPUT/.test(t.nodeName))t.value=i._getProp(t),/radio|checkbox/.test(t.type)?t.onclick=function(t){i.model.set(n,this.checked)}:t.onkeyup=function(e){i.model.props[n]=this.value,t.value=i._getProp(t)};else if(/SELECT/.test(t.nodeName))t.value=i._getProp(t),t.onchange=function(e){var r=this.value,s=t.getAttribute("st-filter");s&&(s=s.split("|")),s&&0!==s.length&&(r=i._makeFilters(r,s)),i.model.set(n,r),t.value=i._getProp(t)};else{if(t.getAttribute(l))return;n=t.getAttribute(a),n||!t[d]?t[g]=i._getProp(t):t[g]=t[d].replace(e,function(e,n){return i._getProp(t,n)})}},_getProp:function(e,n){var n,i,s=n||function(){var t=e.getAttribute(a);return t?t.replace(r,""):null}();return s?(i=this._getFilters(s),s=this._getPropName(s),n=/\./gi.test(s)?this._getFinalPropValue(s):this.model.props[s],null==n?"":(t.V.isFunction(n)&&(n=n.apply(this)),n=this._makeFilters(n,i))):""},_getFinalPropValue:function(e){for(var n,i=e.split("."),s=0,o=this.model.props[i[0].replace(r,"")]||"";t.V.isObject(o)&&null!=(n=o[i[++s]]);)o=o[i[s]];return o},_getFilters:function(t){var e=trimAttrValue(t).split("|");return e.shift(),e},_makeFilters:function(e,n){for(var i,r=e,o=0,a=n.length;a>o;++o)i=this.model[t.T.trim(n[o])],t.V.isFunction(i)?r=i.apply(this.model,[r]):(i=s[n[o]]||t.T[n[o]],t.V.isFunction(i)&&(r=i(r)));return r},_getRootPropName:function(t){return trimAttrValue(t).split(/\.|\|/gi)[0]},_getPropName:function(t){return trimAttrValue(t).split("|")[0]},_getBindTemplates:function(t){if(!i||!this.model.props||0!==Object.keys(this.model.props).length){var e,n,r=t,s=r.find("["+u+"]"),o=0,a=s.length;if(s.length>0)for(;a>o;++o)n=s[o],e="#"+n.getAttribute(u),this._toBindTemplates(e,n),this._renderTemplate(e,n)}},_toBindTemplates:function(e,n){this.bindTemplates[e]||(this.bindTemplates[e]=[]),-1===t.T.indexOf(this.bindTemplates[e],n)&&this.bindTemplates[e].push(n)},_renderTemplate:function(e,n,i){var n=t.$(n),i=t.V.isObject(i)?t.extend(this.model.props,i):this.model.props,r="";t.V.isObject(i)&&(r=t.T.render(e,i,null,{open:"{{",close:"}}"})),n.html(r)},_getBindStyles:function(t){if(!i||!this.model.props||0!==Object.keys(this.model.props).length){var n,r,s,o=this,a=t,u=a.find("["+c+"]"),l=0,h=u.length;if(u.length>0){for(;h>l;++l)for(n=u[l],r=n.getAttribute(c);null!=(s=e.exec(r));){n[c]=r,n.removeAttribute(c);var f=o._getPropName(s[1]);o._toBindStyles(f,n)}this._makeStyles()}}},_toBindStyles:function(e,n){var i=this.bindStyles[e];i||(i=this.bindStyles[e]=[]),-1===t.T.indexOf(i,n)&&i.push(n)},_makeStyles:function(){var e=this;t.T.each(this.bindStyles,function(t,n,i){e._makeStyle(i,t)})},_makeStyle:function(n,i){var r,s=this,i=i||this.bindStyles[n];t.V.isArray(i)&&t.T.each(i,function(n){r=n[c],r=r.replace(e,function(t,e){if(/\|/gi.test(e)){var n=s._getPropName(e),i=s.model.props[n];return s._makeFilters(i,s._getFilters(e))}return s.model.props[e]}),r=r.split(";"),t.T.each(r,function(t){t=t.split(":"),null!=t[1]&&(n.style[t[0]]=t[1])})})},_getBindRepeats:function(t){if(!i||!this.model.props||0!==Object.keys(this.model.props).length){var e,r,s,o=t,a=n.call(o.find("["+l+"]")),u=0,c=a.length;if(a.length>0){for(;c>u;++u)e=a[u],r=e.getAttribute(l),s=e.outerHTML,e.rawOuterHTML=s,e.parent=e.parentNode,this._toBindRepeats(r,e);this._makeRepeats()}}},_toBindRepeats:function(e,n){var i=this.bindRepeats[e];i||(this.bindRepeats[e]=[],i=this.bindRepeats[e]),-1===t.T.indexOf(i,n)&&i.push(n)},_makeRepeats:function(e){var n=this,i={};e?i[e]=this.bindRepeats[e]:i=this.bindRepeats,t.T.each(i,function(t,e,i){n._makeRepeat(t,i)})},_makeRepeat:function(e,i){if(e&&0!==e.length)for(var r,s,o,a=this,u=0,c=e.length,l="",p=a.model.get(i);c>u;++u)if(s=e[u]){if(r=this._removeBindAttr(s),o=s.getAttribute(h),t.V.isEmpty(o)||(S=new RegExp(m+"(\\$?"+o+"[^\\{]*?)"+_,v)),t.V.isArray(p))for(var d=0,g=p.length;g>d;++d)l+=this._replaceBindsArray(r,p[d],d,g-1,o);else t.V.isObject(p)&&t.T.each(p,function(t,e,n){l+=a._replaceBindObject(r,n,t,e)});var y=n.call($(s.parent).find("["+f+"]"));y[0]?(s.newFirstChild=y[0],y.shift(),t.T.each(y,function(t){$(t).remove()}),$(s.newFirstChild).replaceWith(l)):$(s).replaceWith(l)}},_removeBindAttr:function(t){var e=$(t.rawOuterHTML);return e.removeAttr(l).removeAttr(h).attr(f,Date.now()),e=e[0].outerHTML},_replaceBindsArray:function(n,i,r,s,o){var a,u,c=this,l={},h={open:"{{",close:"}}"};return n.replace(S,function(t,e){a=c._getFilters(e),u=c._makeFilters(i,a)}),t.V.isObject(u)?(n=n.replace(/\{\{/gi,"{{="),l={$index:""+r,$first:0===r?"true":"false",$last:r===s?"true":"false"},l[o]=i,n=t.T.render(n,l,null,h)):n=n.replace(S,function(){return u}).replace(y,function(){return r}).replace(b,function(){return 0===r}).replace(w,function(){return r===s}).replace(e,function(t,e){return c.model.has(e)?c.model.get(e):t}),n},_replaceBindObject:function(t,e,n,i){function r(t,e){var n=s._getFilters(e);return s._makeFilters(t,n)}var s=this;return t=t.replace(T,function(t,n){return r(e,n)}).replace(E,function(t,e){return r(n,e)}).replace(y,function(){return""+i})}},t.Watcher=j}(SYST),function(t,e){"use strict";var n=(t.$,"observe"in Object),i=function(){this.__instance_SYST__="SYST Model",this.__name__="SYST Model",this.autoWatcher=!0,this.props={},this.watcher=null,this._watchers={},this.states={}};t.Model=function(){var e=t.extendClass(arguments,i);return e._initialize(),e},i.prototype={$http:t.Http(),_initialize:function(){t.shareModel.add(this.$mid||null,this),this.init&&this.init.apply(this,arguments),(this.$mid||this.autoWatcher!==!1)&&(this.watcher=new t.Watcher(this),this.watcher.init())},generateApi:function(e,n,i){var r=this;if(t.V.isArray(e)&&t.T.each(e,function(t,e){r._generateApi(t,n[t],i)}),t.V.isObject(e))for(var s in e)this._generateApi(s,e[s],i)},_generateApi:function(e,n,i){function r(t,e,r){s.$http.doAjax(n,t,e,r,i)}var s=this;i=t.V.isObject(i)&&i||{},i.callTarget=this,"defineProperty"in Object?Object.defineProperty(s,e,{value:r}):s[e]=r},get:function(t){return this.props[t]},set:function(e,n){function i(t,e){s[t]=e,r.props=s,r._watchProrp(t,e)}if(t.V.isEmpty(e))return this;var r=this,s=this.props;if(t.V.isObject(e))for(var o in e)i(o,e[o]);else t.V.isString(e)&&e.length>0&&i(e,n);return r._watchTemplate(),this},add:function(t,e){this.set(t,e)},has:function(t){return Boolean(this.props[t])},removeProps:function(e){var n=this;return t.V.isString(e)?this.remove(e):t.V.isArray(e)?t.T.each(e,function(t){n.remove(t)}):t.V.isObject(e)?t.T.each(e,function(t,e,i){n.remove(i)}):(this.watcher.removeListener(),this.props={}),this},removePropsAll:function(){this.removeProps()},remove:function(t){return t&&""!=t?(this.props[t]=null,delete this.props[t],this.watcher.removeListener(t),this):this},getItem:function(t,n){var i=(n?e.sessionStorage:e.localStorage).getItem(t);try{i=JSON.parse(i)}catch(r){}return i},setItem:function(n,i,r){function s(n,i){(t.V.isObject(i)||t.V.isArray(i))&&(i=JSON.stringify(i)),(r?e.sessionStorage:e.localStorage).setItem(n,i)}if(t.V.isObject(n))for(var o in n)s(o,n[o]);else{if(!("string"==typeof n&&n.length>0))return this;s(n,i)}},hasItem:function(t,n){return Boolean((n?e.sessionStorage:e.localStorage).getItem(t))},removeItem:function(t,n){(n?e.sessionStorage:e.localStorage).removeItem(t)},removeItems:function(e,n){var i=this;t.V.isString(e)?i.removeItem(e,n):t.V.isArray(e)?t.T.each(e,function(t){i.removeItem(t,n)}):n?sessionStorage.clear():localStorage.clear()},_watchProrp:function(t,e){n||this.watcher&&this.watcher.update(t)},_watchTemplate:function(){this.watcher&&this.watcher.updateRenderTemplate()}}}(SYST,window),function(t){"use strict";t.shareModel={models:{},add:function(e,n){t.V.isEmpty(e)&&(e=(new Date).getTime()+Math.random()),this.models[e]=n},get:function(t){var e=this.models;return e[t]?e[t]:null},remove:function(t){var e=this.models,n=e[t];return n&&(e[t]=null,delete e[t]),n},has:function(t){return!!this.models[t]}}}(SYST),function(t,e){"use strict";var n=function(){this.__instance_SYST__="SYST View",this.__Name__="SYST View",this.container="body",this.template=null};t.View=function(){var e=t.extendClass(arguments,n);return e._initialize(),e},n.prototype={_initialize:function(){this.container=t.$(this.container),this.containerSelector=this.container.selector,!this.unInit&&this.init&&this.init.apply(this),this.events&&this.events!={}&&t.V.isObject(this.events)&&this.onEvent()},destroy:function(){return this.container.html(""),this},handEvent:function(t,e){for(var n=this,i=[],r=2;r<arguments.length;r++)i.push(arguments[r]);return function(r){i.push(e),i.push(r),t.apply(n,i)}},hoadEvent:t.T.hoadEvent,_parseEvent:function(e){function n(t,e,n){u.push(t),a.push(e),c.push(n)}if(!e||0==e.length||e==={})return this;var i,r,s,o,a=[],u=[],c=[];for(var l in e){var h=e[l];if(t.V.isObject(h))for(var f in h)i=this._parseString(h,f),r=i[0],s=i[1],o=i[2],n(r,s,o);else i=this._parseString(e,l),r=i[0],s=i[1],o=i[2],n(r,s,o)}return{events:a,elements:u,functions:c}},_autoHandleEvent:function(e){var n=this._parseEvent(this.events),i=n.events,r=n.elements,s=n.functions;if(!i||0==i.length||i.length=={})return this;for(var e=e||"on",o=0,a=i.length;a>o;o++){if(!i[o])throw new Error("对象侦听"+i[o]+"不存在");if(!s[o])throw new Error("对象"+this+"不存在"+s[o]+"方法");if(!r[o])throw new Error("事件函数"+s[o]+"不存在");t.Events($(r[o]),this,i[o],s[o],e,this.containerSelector)}return this},_parseString:function(t,e){var n=$.trim(e).split(/\s+/gi),i=n[1].replace(/^\$*|[\(*]|[\)*]$/gi,"").replace(/"|'/gi,'"'),r=n[0].replace(/^\s*|\s*$/gi,""),s=t[e];return[i,r,s]},onEvent:function(e,n,i){return t.V.isEmpty(e)?this._autoHandleEvent("on"):t.Events.initEvent(t.V.isString(e)?$(e):e,this,n,i,"on",this.containerSelector),this},offEvent:function(e,n,i){return t.V.isEmpty(e)?this._autoHandleEvent("off"):t.Events.initEvent(t.V.isString(e)?$(e):e,this,n,i,"off",this.containerSelector),this},model:new t.Model,shareModel:t.shareModels}}(SYST,window),function(t){"use strict";var e=function(){this.__instance_SYST__="SYST Controller",this.__Name__="SYST Controller"};t.Controller=function(){var n=t.extendClass(arguments,e);return n._initialize(),n},t.Controller.prototype={defaultHost:location.host,shareModel:t.shareModel,_initialize:function(){t.V.isFunction(this.init)&&this.init.apply(this,arguments)},getModel:function(t){return t?this.shareModel.get(t):this.model},setModel:function(e){if(t.V.isEmpty(e))throw new Error("setModel: 参数有误");this.shareModel.add(e),this.model=e}}}(SYST),function(t){"use strict";var e=window.location,n=e.host,i=(e.port,e.origin||e.protocol+"//"+n,e.pathname,e.hash),r=("pushState"in history,"replaceState"in history,/\((.*?)\)/g),s=/(\(\?)?:\w+/g,o=/\*\w+/g,a=/[\-{}\[\]+?.,\\\^$|#\s]/g,u=function(){},c=function(t){return t.replace(/[#!]/gi,"").split("?")[0]},l=function(){this.__instance_SYST__="SYST Router",this.__Name__="SYST Router"};t.Router=function(){var e=t.extendClass(arguments,l);return e._initialize(),e},t.R=l.prototype={_cache:{},_stateCache:[],routes:null,container:"body",router:null,params:null,isRender:!1,_initialize:function(){if(t.V.isObject(this.routes)&&this.routes!={}){var e=this.routes;for(var n in e)this._initRouters(n,e[n]);this.start()}},_initRouters:function(e,n){t.V.isString(n)&&this[n]&&(n=this[n]),this._cache[e]=n},start:function(){var t=this.redirectTo;if(i&&""!==i){var e=c(i);this["switch"](e)}else t&&this._updateHash(t);return this._changeStart(),this},stop:function(){this._changeStop()},when:function(e,n){return t.V.isEmpty(e)?void 0:(t.V.isObject(n)?this._cache[e]=n:t.V.isFunction(n)&&(this._cache[e]=n.apply(this)),this)},"switch":function(e,n){if(this._cache&&{}!==this._cache){var i=this._getRouter(e);i.router;return this.params=t.T.params(null,window.location.href),this._exec(e),this}},renderBefore:u,rendering:u,rendered:u,getRouter:function(t){return this._getRouter(t)},_getRouter:function(e){if(this._cache&&this._cache!=={}){var n,i,r,s;for(r in this._cache)if(s=this._routeToRegExp(r),s.test(e)){i=r,n=this._cache[r];break}return n=t.V.isObject(n)?n:t.V.isFunction(n)?n.apply(this):null,
{routeKey:i,router:n}}},_routeToRegExp:function(t){return t=t.replace(a,"\\$&").replace(r,"(?:$1)?").replace(s,function(t,e){return e?t:"([^/?]+)"}).replace(o,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,n,i){var r=e.exec(i).slice(1),s=e.exec(n).slice(1),o=[],a={};if(t.V.isArray(r)&&r.length>0)for(var u=0,c=r.length;c>u;++u){var l=r[u];o.push(l?decodeURIComponent(l):null)}if(t.V.isArray(s)&&s.length>0)for(var h=0,c=s.length;c>h;++h){var f=s[h];f&&(a[f.replace(/^[^\w]|[^\w]$/i,"")]=o[h])}return{paramsObject:a,params:o}},_exec:function(n){var i=this._getRouter(n),r=i.router,s=i.routeKey;this.router=r,this.router.route=s,t.V.isRegExp(s)||(n=this._routeToRegExp(s));var o=c(e.hash),a=this._extractParameters(n,s,o),u=a.paramsObject;a.params;this.params=t.extend(this.params,u),this.router.params=this.params,this._onReady(),this._execRouter()},_execRouter:function(){var t=this,e=this.router;if(e){var n=e.container||this.container||"body";e.template?this._template(e.template,n,function(e){t._execMAction(e),t._onRender()}):t._execMAction()}},_execMAction:function(e){this.tpl=e,this.router.tpl=e;var n=this.router,i=n.view,r=n.action;r&&t.V.isFunction(r)&&r.call(this,i,this.params,e)},_changeStart:function(){this._changeStop(),window.addEventListener("hashchange",t.hoadEvent(this,"_changeHandler"),!1)},_changeStop:function(){window.removeEventListener("hashchange",t.hoadEvent(this,"_changeHandler"),!1)},_changeHandler:function(t){var e,n=this;this.router;this.oldURL="#"+t.oldURL.split("#")[1],this.newURL="#"+t.newURL.split("#")[1];var i=c(this.newURL);i&&(e=this._getRouter(i)),e&&e.router&&this._onDestroy(function(){n.router=e,n["switch"](i)})},_template:function(e,n,i){function r(e){t.V.isFunction(s.rendered)&&s.rendered.apply(s),i&&t.V.isFunction(i)&&i.call(s,e)}var s=this;this.container=t.$(n),t.V.isFunction(s.renderBefore)&&s.renderBefore.apply(s);var o=/^(load[\@|\!|\#|\>])+?/gi;o.test(e)?(e=e.replace(o,""),this.container.load(e,function(t){r(t)},function(t){throw new Error("load template is failed!")})):r(e)},_onReady:function(){var e,n=this.router;n&&t.V.isFunction(n.onReady)&&n.onReady.call(this),e=n.view,e&&(e.router=n,e.init&&e.init(n),e.offEvent().onEvent())},_onRender:function(){var e=this.router,n=this.tpl;(e.data||e.isRender||this.isRender)&&(n=t.T.render(n,e.data)),this.container.html(n),this.tpl=n,this.router.tpl=n,t.V.isFunction(e.onRender)&&e.onRender.call(this,n)},_onDestroy:function(e){var n,i,r,s,o=this.router;if(t.V.isObject(o))if(i=o.onDestroy,r=o.route,s=o._destroyState,n=o.view,n&&(o.view=null,delete o.view,n.offEvent()),t.V.isFunction(i)){var a=i.apply(this);a!==!1?(o._destroyState=!0,t.V.isFunction(e)&&e.apply(this)):(o._destroyState=!1,this._updateHash(r))}else t.V.isFunction(e)&&e.apply(this);else t.V.isFunction(e)&&e.apply(this)},_updateHash:function(t){window.location.hash="#!"+t.replace(/^#!/i,"")},_onAnimate:function(t,e){var n=this.router;if(n){var i=n.animate,r=n.animateDuration||300,s=this.container,t=t||"on";if(n&&s)switch(i){case"slide":"on"===t?s.slideDown(r,e):s.slideUp(100,e);break;case"fade":"on"===t?s.fadeIn(r,e):s.fadeOut(100,e);break;default:s.show()}}}}}(SYST),function(t){"use strict";var e=navigator.userAgent.toUpperCase(),n=-1!==e.indexOf("ANDROID"),i=-1!==e.indexOf("IPHONE OS"),r=!(!n&&!i),s=-1!==e.indexOf("MOBILE"),o=-1!==e.indexOf("IPAD"),a=!(!s&&!o),u=function(){this.__instance_SYST__="SYST Native",this.__Name__="SYST Native"};t.Native=function(){return t.extendClass(arguments,u)},t.N=u.prototype={isAndroid:n,isIos:i,isNative:r,isPhone:s,isPad:o,isMobile:a,callNative:function(t){}}}(SYST);